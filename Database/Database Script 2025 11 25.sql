-- MySQL Script generated by MySQL Workbench
-- Tue Nov 25 04:37:41 2025
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema temco_db
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema temco_db
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `temco_db` DEFAULT CHARACTER SET utf8mb3 ;
USE `temco_db` ;

-- -----------------------------------------------------
-- Table `temco_db`.`account_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`account_type` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `type` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 2
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`api_transaction_log`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`api_transaction_log` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `api_source` VARCHAR(100) NOT NULL DEFAULT 'Institute API' COMMENT 'Source system name',
  `transaction_type` VARCHAR(50) NOT NULL DEFAULT 'STUDENT_LOAN_DATA' COMMENT 'Type of transaction',
  `transaction_reference` VARCHAR(100) NULL DEFAULT NULL COMMENT 'External reference ID from institute',
  `request_payload` JSON NULL DEFAULT NULL COMMENT 'Complete API request as JSON',
  `student_nic` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Student NIC for quick search',
  `student_email` VARCHAR(255) NULL DEFAULT NULL COMMENT 'Student email for quick search',
  `verification_token` VARCHAR(100) NULL DEFAULT NULL COMMENT 'API verification token',
  `status` VARCHAR(50) NOT NULL DEFAULT 'RECEIVED' COMMENT 'RECEIVED, VALIDATING, PROCESSING, COMPLETED, FAILED, ROLLBACK',
  `result_message` TEXT NULL DEFAULT NULL COMMENT 'Success or error message',
  `error_details` TEXT NULL DEFAULT NULL COMMENT 'Detailed error information for debugging',
  `error_code` VARCHAR(50) NULL DEFAULT NULL COMMENT 'Error code for categorization',
  `validation_errors` JSON NULL DEFAULT NULL COMMENT 'List of validation errors if any',
  `materialized_table_id` INT NULL DEFAULT NULL COMMENT 'ID in materialized table',
  `loan_customer_id` INT NULL DEFAULT NULL COMMENT 'Created/updated loan customer ID',
  `general_user_profile_id` INT NULL DEFAULT NULL COMMENT 'Created/updated profile ID',
  `member_id` INT NULL DEFAULT NULL COMMENT 'Created/updated member ID',
  `student_due_ids` JSON NULL DEFAULT NULL COMMENT 'Array of created student_due record IDs',
  `received_at` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  `processing_started_at` DATETIME NULL DEFAULT NULL,
  `processing_completed_at` DATETIME NULL DEFAULT NULL,
  `processing_duration_ms` INT NULL DEFAULT NULL COMMENT 'Processing time in milliseconds',
  `retry_count` INT NULL DEFAULT '0' COMMENT 'Number of retry attempts',
  `last_retry_at` DATETIME NULL DEFAULT NULL COMMENT 'Last retry timestamp',
  `max_retries` INT NULL DEFAULT '3' COMMENT 'Maximum retry attempts allowed',
  `server_name` VARCHAR(100) NULL DEFAULT NULL COMMENT 'Server that processed the request',
  `ip_address` VARCHAR(45) NULL DEFAULT NULL COMMENT 'Source IP address',
  `user_agent` TEXT NULL DEFAULT NULL COMMENT 'API client user agent',
  PRIMARY KEY (`id`),
  INDEX `idx_status` (`status` ASC) VISIBLE,
  INDEX `idx_student_nic` (`student_nic` ASC) VISIBLE,
  INDEX `idx_student_email` (`student_email` ASC) VISIBLE,
  INDEX `idx_received_at` (`received_at` ASC) VISIBLE,
  INDEX `idx_verification_token` (`verification_token` ASC) VISIBLE,
  INDEX `idx_transaction_reference` (`transaction_reference` ASC) VISIBLE,
  INDEX `idx_loan_customer` (`loan_customer_id` ASC) VISIBLE,
  INDEX `idx_api_source` (`api_source` ASC) VISIBLE,
  INDEX `idx_transaction_type` (`transaction_type` ASC) VISIBLE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci
COMMENT = 'API transaction log for audit, debugging and reconciliation';


-- -----------------------------------------------------
-- Table `temco_db`.`approval_level`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`approval_level` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 6
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`approval_status`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`approval_status` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 3
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`bank`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`bank` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 27
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`country`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`country` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 253
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`province`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`province` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `country_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_province_country1_idx` (`country_id` ASC) VISIBLE,
  CONSTRAINT `fk_province_country1`
    FOREIGN KEY (`country_id`)
    REFERENCES `temco_db`.`country` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 10
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`district`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`district` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `province_id` INT NOT NULL,
  `district_code` VARCHAR(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_district_province1_idx` (`province_id` ASC) VISIBLE,
  CONSTRAINT `fk_district_province1`
    FOREIGN KEY (`province_id`)
    REFERENCES `temco_db`.`province` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 27
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`city`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`city` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) NULL DEFAULT NULL,
  `postal_code` VARCHAR(255) NULL DEFAULT NULL,
  `district_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_city_district1_idx` (`district_id` ASC) VISIBLE,
  CONSTRAINT `fk_city_district1`
    FOREIGN KEY (`district_id`)
    REFERENCES `temco_db`.`district` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1989
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`organization_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`organization_type` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 6
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`registration_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`registration_type` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`general_organization_profile`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`general_organization_profile` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `code` VARCHAR(45) NULL DEFAULT NULL,
  `name` VARCHAR(1000) NULL DEFAULT NULL,
  `address1` TEXT NULL DEFAULT NULL,
  `address2` TEXT NULL DEFAULT NULL,
  `address3` TEXT NULL DEFAULT NULL,
  `phone_no` VARCHAR(45) NULL DEFAULT NULL,
  `email` VARCHAR(45) NULL DEFAULT NULL,
  `organization_type_id` INT NULL DEFAULT NULL,
  `city_id` INT NULL DEFAULT NULL,
  `registration_type_id` INT NULL DEFAULT NULL,
  `vision` TEXT NULL DEFAULT NULL,
  `mission` TEXT NULL DEFAULT NULL,
  `registration_no` VARCHAR(45) NULL DEFAULT NULL,
  `website` VARCHAR(45) NULL DEFAULT NULL,
  `fax` VARCHAR(45) NULL DEFAULT NULL,
  `objectives` VARCHAR(45) NULL DEFAULT NULL,
  `moto` VARCHAR(45) NULL DEFAULT NULL,
  `logo` VARCHAR(45) NULL DEFAULT NULL,
  `header` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_general_organization_profile_organization_type1_idx` (`organization_type_id` ASC) VISIBLE,
  INDEX `fk_general_organization_profile_city1_idx` (`city_id` ASC) VISIBLE,
  INDEX `fk_general_organization_profile_registration_type1_idx` (`registration_type_id` ASC) VISIBLE,
  CONSTRAINT `fk_general_organization_profile_city1`
    FOREIGN KEY (`city_id`)
    REFERENCES `temco_db`.`city` (`id`),
  CONSTRAINT `fk_general_organization_profile_organization_type1`
    FOREIGN KEY (`organization_type_id`)
    REFERENCES `temco_db`.`organization_type` (`id`),
  CONSTRAINT `fk_general_organization_profile_registration_type1`
    FOREIGN KEY (`registration_type_id`)
    REFERENCES `temco_db`.`registration_type` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 3336
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`branch_of_the_bank`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`branch_of_the_bank` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `general_organization_profile_id` INT NOT NULL,
  `branch_code` VARCHAR(45) NULL DEFAULT NULL,
  `bank_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_branch_of_the_bank_general_organization_profile1_idx` (`general_organization_profile_id` ASC) VISIBLE,
  INDEX `fk_branch_of_the_bank_bank1_idx` (`bank_id` ASC) VISIBLE,
  CONSTRAINT `fk_branch_of_the_bank_bank1`
    FOREIGN KEY (`bank_id`)
    REFERENCES `temco_db`.`bank` (`id`),
  CONSTRAINT `fk_branch_of_the_bank_general_organization_profile1`
    FOREIGN KEY (`general_organization_profile_id`)
    REFERENCES `temco_db`.`general_organization_profile` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 2889
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`designation`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`designation` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 7
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`divisional_secretarial`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`divisional_secretarial` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `district_id` INT NOT NULL,
  `ds_code` VARCHAR(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_divisional_secretarial_district1_idx` (`district_id` ASC) VISIBLE,
  CONSTRAINT `fk_divisional_secretarial_district1`
    FOREIGN KEY (`district_id`)
    REFERENCES `temco_db`.`district` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 341
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`education_level`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`education_level` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 6
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`gender`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`gender` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 3
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`gn_division`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`gn_division` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `divisional_secretarial_id` INT NOT NULL,
  `gn_division_code` VARCHAR(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_gn_division_divisional_secretarial1_idx` (`divisional_secretarial_id` ASC) VISIBLE,
  CONSTRAINT `fk_gn_division_divisional_secretarial1`
    FOREIGN KEY (`divisional_secretarial_id`)
    REFERENCES `temco_db`.`divisional_secretarial` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 12535
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`profeession`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`profeession` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 89
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`general_user_profile`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`general_user_profile` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `nic` VARCHAR(255) NOT NULL,
  `first_name` VARCHAR(255) NULL DEFAULT NULL,
  `last_name` VARCHAR(255) NULL DEFAULT NULL,
  `full_name` TEXT NULL DEFAULT NULL,
  `initials_name` VARCHAR(255) NULL DEFAULT NULL,
  `home_phone` VARCHAR(45) NULL DEFAULT NULL,
  `mobile_no` VARCHAR(255) NULL DEFAULT NULL,
  `emergency_contact` VARCHAR(45) NULL DEFAULT NULL,
  `email` VARCHAR(255) NULL DEFAULT NULL,
  `gender_id` INT NULL DEFAULT NULL,
  `address1` VARCHAR(1000) NULL DEFAULT NULL,
  `address2` VARCHAR(1000) NULL DEFAULT NULL,
  `address3` VARCHAR(1000) NULL DEFAULT NULL,
  `province_id` INT NULL DEFAULT NULL,
  `district_id` INT NULL DEFAULT NULL,
  `divisional_secretarial_id` INT NULL DEFAULT NULL,
  `gn_division_id` INT NULL DEFAULT NULL,
  `date` DATE NULL DEFAULT NULL,
  `profile_created_date` DATETIME NULL DEFAULT NULL,
  `updated_at` DATETIME NULL DEFAULT NULL,
  `dob` DATE NULL DEFAULT NULL,
  `education_level_id` INT NULL DEFAULT NULL,
  `office_phone_no` VARCHAR(255) NULL DEFAULT NULL,
  `signature` VARCHAR(255) NULL DEFAULT NULL,
  `designation_id` INT NULL DEFAULT NULL,
  `profeession_id` INT NULL DEFAULT NULL,
  `is_verified` TINYBLOB NULL DEFAULT NULL,
  `verification_token` VARCHAR(345) NOT NULL,
  `is_active` TINYINT NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `nic_UNIQUE` (`nic` ASC) VISIBLE,
  UNIQUE INDEX `idx_gup_nic` (`nic` ASC) VISIBLE,
  INDEX `fk_general_user_profile_gender1_idx` (`gender_id` ASC) VISIBLE,
  INDEX `fk_general_user_profile_province1_idx` (`province_id` ASC) VISIBLE,
  INDEX `fk_general_user_profile_district1_idx` (`district_id` ASC) VISIBLE,
  INDEX `fk_general_user_profile_divisional_secretarial1_idx` (`divisional_secretarial_id` ASC) VISIBLE,
  INDEX `fk_general_user_profile_gn_division1_idx` (`gn_division_id` ASC) VISIBLE,
  INDEX `fk_general_user_profile_education_level1_idx` (`education_level_id` ASC) VISIBLE,
  INDEX `fk_general_user_profile_designation1_idx` (`designation_id` ASC) VISIBLE,
  INDEX `fk_general_user_profile_profeession1_idx` (`profeession_id` ASC) VISIBLE,
  INDEX `idx_gup_email` (`email` ASC) VISIBLE,
  INDEX `idx_gup_names` (`first_name` ASC, `last_name` ASC) VISIBLE,
  INDEX `idx_fk_gup_province` (`province_id` ASC) VISIBLE,
  INDEX `idx_fk_gup_district` (`district_id` ASC) VISIBLE,
  INDEX `idx_fk_gup_ds` (`divisional_secretarial_id` ASC) VISIBLE,
  INDEX `idx_fk_gup_gn` (`gn_division_id` ASC) VISIBLE,
  CONSTRAINT `fk_general_user_profile_designation1`
    FOREIGN KEY (`designation_id`)
    REFERENCES `temco_db`.`designation` (`id`),
  CONSTRAINT `fk_general_user_profile_district1`
    FOREIGN KEY (`district_id`)
    REFERENCES `temco_db`.`district` (`id`),
  CONSTRAINT `fk_general_user_profile_divisional_secretarial1`
    FOREIGN KEY (`divisional_secretarial_id`)
    REFERENCES `temco_db`.`divisional_secretarial` (`id`),
  CONSTRAINT `fk_general_user_profile_education_level1`
    FOREIGN KEY (`education_level_id`)
    REFERENCES `temco_db`.`education_level` (`id`),
  CONSTRAINT `fk_general_user_profile_gender1`
    FOREIGN KEY (`gender_id`)
    REFERENCES `temco_db`.`gender` (`id`),
  CONSTRAINT `fk_general_user_profile_gn_division1`
    FOREIGN KEY (`gn_division_id`)
    REFERENCES `temco_db`.`gn_division` (`id`),
  CONSTRAINT `fk_general_user_profile_profeession1`
    FOREIGN KEY (`profeession_id`)
    REFERENCES `temco_db`.`profeession` (`id`),
  CONSTRAINT `fk_general_user_profile_province1`
    FOREIGN KEY (`province_id`)
    REFERENCES `temco_db`.`province` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 164
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`spot_member`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`spot_member` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `registered_date` DATETIME(6) NULL DEFAULT NULL,
  `general_user_profile_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_spot_member_general_user_profile1_idx` (`general_user_profile_id` ASC) VISIBLE,
  CONSTRAINT `fk_spot_member_general_user_profile1`
    FOREIGN KEY (`general_user_profile_id`)
    REFERENCES `temco_db`.`general_user_profile` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`swift_codes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`swift_codes` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `code` VARCHAR(45) NULL DEFAULT NULL,
  `branch_of_the_bank_id` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_swift_codes_branch_of_the_bank1_idx` (`branch_of_the_bank_id` ASC) VISIBLE,
  CONSTRAINT `fk_swift_codes_branch_of_the_bank1`
    FOREIGN KEY (`branch_of_the_bank_id`)
    REFERENCES `temco_db`.`branch_of_the_bank` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 22
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`bank_account`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`bank_account` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `account_no` VARCHAR(45) NULL DEFAULT NULL,
  `no` VARCHAR(255) NULL DEFAULT NULL,
  `street` VARCHAR(255) NULL DEFAULT NULL,
  `account_holder` VARCHAR(45) NULL DEFAULT NULL,
  `swift_codes_id` INT NULL DEFAULT NULL,
  `branch_of_the_bank_id` INT NULL DEFAULT NULL,
  `spot_member_id` INT NULL DEFAULT NULL,
  `created_date` DATETIME NULL DEFAULT NULL,
  `is_active` TINYINT NULL DEFAULT NULL,
  `last_update_date` DATETIME NULL DEFAULT NULL,
  `updated_at` DATETIME NULL DEFAULT NULL,
  `is_default` TINYINT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_bank_account_swift_codes1_idx` (`swift_codes_id` ASC) VISIBLE,
  INDEX `fk_bank_account_branch_of_the_bank1_idx` (`branch_of_the_bank_id` ASC) VISIBLE,
  INDEX `fk_bank_account_spot_member1_idx` (`spot_member_id` ASC) VISIBLE,
  INDEX `idx_bank_account_no` (`account_no` ASC) VISIBLE,
  CONSTRAINT `fk_bank_account_branch_of_the_bank1`
    FOREIGN KEY (`branch_of_the_bank_id`)
    REFERENCES `temco_db`.`branch_of_the_bank` (`id`),
  CONSTRAINT `fk_bank_account_spot_member1`
    FOREIGN KEY (`spot_member_id`)
    REFERENCES `temco_db`.`spot_member` (`id`),
  CONSTRAINT `fk_bank_account_swift_codes1`
    FOREIGN KEY (`swift_codes_id`)
    REFERENCES `temco_db`.`swift_codes` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 19
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`member`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`member` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `membership_no` VARCHAR(100) NULL DEFAULT NULL,
  `registered_date` DATETIME NULL DEFAULT NULL,
  `kpi_value` DOUBLE NULL DEFAULT NULL,
  `available_fund` DOUBLE NULL DEFAULT NULL,
  `last_payment_date` DATETIME(6) NULL DEFAULT NULL,
  `updated_at` DATETIME NULL DEFAULT NULL,
  `general_user_profile_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_member_general_user_profile1_idx` (`general_user_profile_id` ASC) VISIBLE,
  INDEX `idx_member_membership_no` (`membership_no` ASC) VISIBLE,
  INDEX `idx_fk_member_gup` (`general_user_profile_id` ASC) VISIBLE,
  CONSTRAINT `fk_member_general_user_profile1`
    FOREIGN KEY (`general_user_profile_id`)
    REFERENCES `temco_db`.`general_user_profile` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 156
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`member_bank_accounts`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`member_bank_accounts` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `account_no` VARCHAR(45) NULL DEFAULT NULL,
  `date` DATE NULL DEFAULT NULL,
  `member_id` INT NOT NULL,
  `account_type_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_member_bank_accounts_member1_idx` (`member_id` ASC) VISIBLE,
  INDEX `fk_member_bank_accounts_account_type1_idx` (`account_type_id` ASC) VISIBLE,
  INDEX `idx_fk_bank_account_member` (`member_id` ASC) VISIBLE,
  INDEX `idx_fk_bank_account_type` (`account_type_id` ASC) VISIBLE,
  CONSTRAINT `fk_member_bank_accounts_account_type1`
    FOREIGN KEY (`account_type_id`)
    REFERENCES `temco_db`.`account_type` (`id`),
  CONSTRAINT `fk_member_bank_accounts_member1`
    FOREIGN KEY (`member_id`)
    REFERENCES `temco_db`.`member` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 90
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`transaction_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`transaction_type` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `type` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`bank_statement`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`bank_statement` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `transaction_type_id` INT NOT NULL,
  `member_bank_accounts_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_transaction_history_transaction_type1_idx` (`transaction_type_id` ASC) VISIBLE,
  INDEX `fk_transaction_history_member_bank_accounts1_idx` (`member_bank_accounts_id` ASC) VISIBLE,
  CONSTRAINT `fk_transaction_history_member_bank_accounts1`
    FOREIGN KEY (`member_bank_accounts_id`)
    REFERENCES `temco_db`.`member_bank_accounts` (`id`),
  CONSTRAINT `fk_transaction_history_transaction_type1`
    FOREIGN KEY (`transaction_type_id`)
    REFERENCES `temco_db`.`transaction_type` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`factoring_fee`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`factoring_fee` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `value` DOUBLE NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 2
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`organization_branches`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`organization_branches` (
  `id` INT NOT NULL,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `general_organization_profile_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_institute_branches_general_organization_profile1_idx` (`general_organization_profile_id` ASC) VISIBLE,
  CONSTRAINT `fk_institute_branches_general_organization_profile1`
    FOREIGN KEY (`general_organization_profile_id`)
    REFERENCES `temco_db`.`general_organization_profile` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`branch_has_factoring_fee`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`branch_has_factoring_fee` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `factoring_fee_id` INT NOT NULL,
  `organization_branches_id` INT NOT NULL,
  `is_active` TINYINT NULL DEFAULT NULL,
  `date` DATE NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_table1_factoring_fee1_idx` (`factoring_fee_id` ASC) VISIBLE,
  INDEX `fk_table1_organization_branches1_idx` (`organization_branches_id` ASC) VISIBLE,
  CONSTRAINT `fk_table1_factoring_fee1`
    FOREIGN KEY (`factoring_fee_id`)
    REFERENCES `temco_db`.`factoring_fee` (`id`),
  CONSTRAINT `fk_table1_organization_branches1`
    FOREIGN KEY (`organization_branches_id`)
    REFERENCES `temco_db`.`organization_branches` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`branch_level`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`branch_level` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`loan_customer`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`loan_customer` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `gup_id` INT NULL DEFAULT NULL,
  `nic` VARCHAR(45) NULL DEFAULT NULL,
  `first_name` VARCHAR(255) NULL DEFAULT NULL,
  `last_name` VARCHAR(255) NULL DEFAULT NULL,
  `name_with_initials` VARCHAR(255) NULL DEFAULT NULL,
  `dob` DATE NULL DEFAULT NULL,
  `email` VARCHAR(255) NULL DEFAULT NULL,
  `address_line1` VARCHAR(255) NULL DEFAULT NULL,
  `address_line2` VARCHAR(255) NULL DEFAULT NULL,
  `address_line3` VARCHAR(255) NULL DEFAULT NULL,
  `verification_token` VARCHAR(100) NULL DEFAULT NULL,
  `gender_id` INT NULL DEFAULT NULL,
  `is_subscribe` TINYINT NULL DEFAULT NULL,
  `general_user_profile_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_loan_customer_gender1_idx` (`gender_id` ASC) VISIBLE,
  INDEX `fk_loan_customer_general_user_profile1_idx` (`general_user_profile_id` ASC) VISIBLE,
  CONSTRAINT `fk_loan_customer_gender1`
    FOREIGN KEY (`gender_id`)
    REFERENCES `temco_db`.`gender` (`id`),
  CONSTRAINT `fk_loan_customer_general_user_profile1`
    FOREIGN KEY (`general_user_profile_id`)
    REFERENCES `temco_db`.`general_user_profile` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1450
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`branch_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`branch_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `organization_branches_id` INT NOT NULL,
  `loan_customer_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_branch_manager_organization_branches1_idx` (`organization_branches_id` ASC) VISIBLE,
  INDEX `fk_branch_manager_loan_customer1_idx` (`loan_customer_id` ASC) VISIBLE,
  CONSTRAINT `fk_branch_manager_loan_customer1`
    FOREIGN KEY (`loan_customer_id`)
    REFERENCES `temco_db`.`loan_customer` (`id`),
  CONSTRAINT `fk_branch_manager_organization_branches1`
    FOREIGN KEY (`organization_branches_id`)
    REFERENCES `temco_db`.`organization_branches` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1367
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`business_sector`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`business_sector` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 4
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`trunover_classification`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`trunover_classification` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `trunover` VARCHAR(45) NULL DEFAULT NULL,
  `created_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`business_information`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`business_information` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `business_sector_id` INT NULL DEFAULT NULL,
  `member_id` INT NULL DEFAULT NULL,
  `general_organization_profile_id` INT NULL DEFAULT NULL,
  `trunover_classification_id` INT NULL DEFAULT NULL,
  `initial_shares` DOUBLE NULL DEFAULT NULL,
  `monthly_commitment_shares` DOUBLE NULL DEFAULT NULL,
  `savings` DOUBLE NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_business_information_business_sector1_idx` (`business_sector_id` ASC) VISIBLE,
  INDEX `fk_business_information_member1_idx` (`member_id` ASC) VISIBLE,
  INDEX `fk_business_information_general_organization_profile1_idx` (`general_organization_profile_id` ASC) VISIBLE,
  INDEX `fk_business_information_trunover_classification1_idx` (`trunover_classification_id` ASC) VISIBLE,
  CONSTRAINT `fk_business_information_business_sector1`
    FOREIGN KEY (`business_sector_id`)
    REFERENCES `temco_db`.`business_sector` (`id`),
  CONSTRAINT `fk_business_information_general_organization_profile1`
    FOREIGN KEY (`general_organization_profile_id`)
    REFERENCES `temco_db`.`general_organization_profile` (`id`),
  CONSTRAINT `fk_business_information_member1`
    FOREIGN KEY (`member_id`)
    REFERENCES `temco_db`.`member` (`id`),
  CONSTRAINT `fk_business_information_trunover_classification1`
    FOREIGN KEY (`trunover_classification_id`)
    REFERENCES `temco_db`.`trunover_classification` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 106
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`chart_of_account`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`chart_of_account` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `account_name` VARCHAR(255) NULL DEFAULT NULL,
  `code` VARCHAR(45) NULL DEFAULT NULL,
  `is_active` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`comment_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`comment_type` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `date` DATE NULL DEFAULT NULL,
  `comment` TEXT NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 5
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`master_documents`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`master_documents` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `document_name` VARCHAR(100) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 22
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`member_documents`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`member_documents` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 14
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`created_document`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`created_document` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `member_documents_id` INT NOT NULL,
  `master_documents_id` INT NOT NULL,
  `date` DATETIME NULL DEFAULT NULL,
  `isActive` TINYINT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_document_creator_member_documents1_idx` (`member_documents_id` ASC) VISIBLE,
  INDEX `fk_document_creator_master_documents1_idx` (`master_documents_id` ASC) VISIBLE,
  CONSTRAINT `fk_document_creator_master_documents1`
    FOREIGN KEY (`master_documents_id`)
    REFERENCES `temco_db`.`master_documents` (`id`),
  CONSTRAINT `fk_document_creator_member_documents1`
    FOREIGN KEY (`member_documents_id`)
    REFERENCES `temco_db`.`member_documents` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 28
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`currency`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`currency` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `currency_code` VARCHAR(10) NOT NULL COMMENT 'ISO 4217 currency code (USD, GBP, EUR, LKR)',
  `currency_name` VARCHAR(100) NOT NULL COMMENT 'Full currency name',
  `currency_symbol` VARCHAR(10) NULL DEFAULT NULL COMMENT 'Currency symbol ($, £, €, Rs)',
  `exchange_rate_to_lkr` DECIMAL(15,4) NULL DEFAULT NULL COMMENT 'Current exchange rate to LKR',
  `is_active` TINYINT(1) NULL DEFAULT '1' COMMENT 'Active/Inactive flag',
  `created_date` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  `modified_date` DATETIME NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `currency_code` (`currency_code` ASC) VISIBLE,
  INDEX `idx_currency_code` (`currency_code` ASC) VISIBLE,
  INDEX `idx_is_active` (`is_active` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 10
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci
COMMENT = 'Currency reference table for international payments';


-- -----------------------------------------------------
-- Table `temco_db`.`currency_rate_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`currency_rate_type` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`currency_rates`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`currency_rates` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `enter_value` DOUBLE NULL DEFAULT NULL,
  `default_value` DOUBLE NULL DEFAULT NULL,
  `currency_rate_type_id` INT NOT NULL,
  `last_update_time` DATETIME(6) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_currency_rates_currency_rate_type1_idx` (`currency_rate_type_id` ASC) VISIBLE,
  CONSTRAINT `fk_currency_rates_currency_rate_type1`
    FOREIGN KEY (`currency_rate_type_id`)
    REFERENCES `temco_db`.`currency_rate_type` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`loan`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`loan` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `loan_brand` VARCHAR(255) NULL DEFAULT NULL,
  `description` TEXT NULL DEFAULT NULL,
  `is_active` TINYINT NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 2
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`loan_offer`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`loan_offer` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `description` TEXT NULL DEFAULT NULL COMMENT 'This table contain offer letters',
  `loan_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_loan_offer_loan1_idx` (`loan_id` ASC) VISIBLE,
  CONSTRAINT `fk_loan_offer_loan1`
    FOREIGN KEY (`loan_id`)
    REFERENCES `temco_db`.`loan` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 2
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`offer_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`offer_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `date` DATETIME NULL DEFAULT NULL,
  `is_accepted` TINYINT NULL DEFAULT NULL,
  `loan_offer_id` INT NOT NULL,
  `loan_customer_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_table1_loan_offer1_idx` (`loan_offer_id` ASC) VISIBLE,
  INDEX `fk_offer_manager_loan_customer1_idx` (`loan_customer_id` ASC) VISIBLE,
  CONSTRAINT `fk_offer_manager_loan_customer1`
    FOREIGN KEY (`loan_customer_id`)
    REFERENCES `temco_db`.`loan_customer` (`id`),
  CONSTRAINT `fk_table1_loan_offer1`
    FOREIGN KEY (`loan_offer_id`)
    REFERENCES `temco_db`.`loan_offer` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1440
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`response_status`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`response_status` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 16
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`customer_response_history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`customer_response_history` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `response_status_id` INT NOT NULL,
  `offer_manager_id` INT NOT NULL,
  `date` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_customer_response_history_response_status1_idx` (`response_status_id` ASC) VISIBLE,
  INDEX `fk_customer_response_history_offer_manager1_idx` (`offer_manager_id` ASC) VISIBLE,
  CONSTRAINT `fk_customer_response_history_offer_manager1`
    FOREIGN KEY (`offer_manager_id`)
    REFERENCES `temco_db`.`offer_manager` (`id`),
  CONSTRAINT `fk_customer_response_history_response_status1`
    FOREIGN KEY (`response_status_id`)
    REFERENCES `temco_db`.`response_status` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 959
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`package_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`package_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 10
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`table_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`table_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `package_manager_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_table_manager_package_manager1_idx` (`package_manager_id` ASC) VISIBLE,
  CONSTRAINT `fk_table_manager_package_manager1`
    FOREIGN KEY (`package_manager_id`)
    REFERENCES `temco_db`.`package_manager` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 7
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`user_role`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`user_role` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 10
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`user_login`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`user_login` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(255) NULL DEFAULT NULL,
  `password` VARCHAR(255) NULL DEFAULT NULL,
  `is_active` TINYINT NULL DEFAULT NULL,
  `max_login_attempt` INT NULL DEFAULT NULL,
  `count_attempt` INT NULL DEFAULT NULL,
  `user_role_id` INT NULL DEFAULT NULL,
  `general_user_profile_id` INT NULL DEFAULT NULL,
  `general_organization_profile_id` INT NULL DEFAULT NULL,
  `updated_at` DATETIME NULL DEFAULT NULL,
  `last_login_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_user_login_user_role_idx` (`user_role_id` ASC) VISIBLE,
  INDEX `fk_user_login_general_user_profile1_idx` (`general_user_profile_id` ASC) VISIBLE,
  INDEX `fk_user_login_general_organization_profile1_idx` (`general_organization_profile_id` ASC) VISIBLE,
  INDEX `idx_user_login_username` (`username` ASC) VISIBLE,
  CONSTRAINT `fk_user_login_general_organization_profile1`
    FOREIGN KEY (`general_organization_profile_id`)
    REFERENCES `temco_db`.`general_organization_profile` (`id`),
  CONSTRAINT `fk_user_login_general_user_profile1`
    FOREIGN KEY (`general_user_profile_id`)
    REFERENCES `temco_db`.`general_user_profile` (`id`),
  CONSTRAINT `fk_user_login_user_role`
    FOREIGN KEY (`user_role_id`)
    REFERENCES `temco_db`.`user_role` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 112
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`data_changed_log_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`data_changed_log_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `date` DATETIME NULL DEFAULT NULL,
  `table_manager_id` INT NOT NULL,
  `user_login_id` INT NOT NULL,
  `attribute_name` VARCHAR(45) NULL DEFAULT NULL,
  `comment` VARCHAR(45) NULL DEFAULT NULL,
  `referance` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_data_changed_log_manager_table_manager1_idx` (`table_manager_id` ASC) VISIBLE,
  INDEX `fk_data_changed_log_manager_user_login1_idx` (`user_login_id` ASC) VISIBLE,
  CONSTRAINT `fk_data_changed_log_manager_table_manager1`
    FOREIGN KEY (`table_manager_id`)
    REFERENCES `temco_db`.`table_manager` (`id`),
  CONSTRAINT `fk_data_changed_log_manager_user_login1`
    FOREIGN KEY (`user_login_id`)
    REFERENCES `temco_db`.`user_login` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 2
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`departments`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`departments` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 5
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`document_items`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`document_items` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `item_name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`document_creator`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`document_creator` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `meta_data_id` INT NOT NULL,
  `master_documents_id` INT NOT NULL,
  `version` VARCHAR(45) NULL DEFAULT NULL,
  `is_active` TINYINT NULL DEFAULT NULL,
  `date_created` DATETIME NULL DEFAULT NULL,
  `document_type_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_document_fields_manager_meta_data1_idx` (`meta_data_id` ASC) VISIBLE,
  INDEX `fk_document_fields_manager_master_documents1_idx` (`master_documents_id` ASC) VISIBLE,
  INDEX `fk_document_manager_document_type1_idx` (`document_type_id` ASC) VISIBLE,
  CONSTRAINT `fk_document_fields_manager_master_documents1`
    FOREIGN KEY (`master_documents_id`)
    REFERENCES `temco_db`.`master_documents` (`id`),
  CONSTRAINT `fk_document_fields_manager_meta_data1`
    FOREIGN KEY (`meta_data_id`)
    REFERENCES `temco_db`.`document_items` (`id`),
  CONSTRAINT `fk_document_manager_document_type1`
    FOREIGN KEY (`document_type_id`)
    REFERENCES `temco_db`.`member_documents` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`document_data_verification`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`document_data_verification` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `field_name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`user_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`user_type` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `type` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 3
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`universal_user_document`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`universal_user_document` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `general_user_profile_id` INT NOT NULL,
  `created_timestamp` DATETIME NULL DEFAULT NULL,
  `is_verified` TINYINT NULL DEFAULT NULL,
  `file_url` TEXT NULL DEFAULT NULL,
  `document_type_id` INT NOT NULL,
  `user_type_id` INT NOT NULL,
  `is_active` TINYINT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_user_document_general_user_profile1_idx` (`general_user_profile_id` ASC) VISIBLE,
  INDEX `fk_universal_user_document_document_type1_idx` (`document_type_id` ASC) VISIBLE,
  INDEX `fk_universal_user_document_user_type1_idx` (`user_type_id` ASC) VISIBLE,
  INDEX `idx_doc_verification_status` (`general_user_profile_id` ASC, `is_verified` ASC) VISIBLE,
  INDEX `idx_fk_doc_user` (`general_user_profile_id` ASC) VISIBLE,
  INDEX `idx_fk_doc_type` (`document_type_id` ASC) VISIBLE,
  CONSTRAINT `fk_universal_user_document_document_type1`
    FOREIGN KEY (`document_type_id`)
    REFERENCES `temco_db`.`member_documents` (`id`),
  CONSTRAINT `fk_universal_user_document_user_type1`
    FOREIGN KEY (`user_type_id`)
    REFERENCES `temco_db`.`user_type` (`id`),
  CONSTRAINT `fk_user_document_general_user_profile1`
    FOREIGN KEY (`general_user_profile_id`)
    REFERENCES `temco_db`.`general_user_profile` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 98
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`document_fields_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`document_fields_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `document_creator_id` INT NOT NULL,
  `universal_user_document_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_document_fields_manager_document_creator1_idx` (`document_creator_id` ASC) VISIBLE,
  INDEX `fk_document_fields_manager_universal_user_document1_idx` (`universal_user_document_id` ASC) VISIBLE,
  CONSTRAINT `fk_document_fields_manager_document_creator1`
    FOREIGN KEY (`document_creator_id`)
    REFERENCES `temco_db`.`document_creator` (`id`),
  CONSTRAINT `fk_document_fields_manager_universal_user_document1`
    FOREIGN KEY (`universal_user_document_id`)
    REFERENCES `temco_db`.`universal_user_document` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`document_image_path`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`document_image_path` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `img_path` TEXT NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`document_inactive`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`document_inactive` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `date_inactive` DATETIME NULL DEFAULT NULL,
  `document_creator_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_document_inactive_document_creator1_idx` (`document_creator_id` ASC) VISIBLE,
  CONSTRAINT `fk_document_inactive_document_creator1`
    FOREIGN KEY (`document_creator_id`)
    REFERENCES `temco_db`.`document_creator` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`document_verification`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`document_verification` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `verified_date` DATETIME NULL DEFAULT NULL,
  `updated_at` DATETIME NULL DEFAULT NULL,
  `universal_user_document_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_document_verification_universal_user_document1_idx` (`universal_user_document_id` ASC) VISIBLE,
  CONSTRAINT `fk_document_verification_universal_user_document1`
    FOREIGN KEY (`universal_user_document_id`)
    REFERENCES `temco_db`.`universal_user_document` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`documents_submission_status`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`documents_submission_status` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 4
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`due_category`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`due_category` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `category_code` VARCHAR(50) NOT NULL COMMENT 'Unique code for the due category',
  `category_name` VARCHAR(100) NOT NULL COMMENT 'Display name of the due category',
  `description` TEXT NULL DEFAULT NULL COMMENT 'Detailed description of the due type',
  `is_international` TINYINT(1) NULL DEFAULT '0' COMMENT '1 if international payment, 0 if local',
  `requires_currency_conversion` TINYINT(1) NULL DEFAULT '0' COMMENT '1 if currency conversion needed',
  `display_order` INT NULL DEFAULT '0' COMMENT 'Sort order for UI display',
  `is_active` TINYINT(1) NULL DEFAULT '1' COMMENT 'Active/Inactive flag',
  `created_date` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  `modified_date` DATETIME NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `created_by` INT NULL DEFAULT NULL,
  `modified_by` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `category_code` (`category_code` ASC) VISIBLE,
  INDEX `idx_category_code` (`category_code` ASC) VISIBLE,
  INDEX `idx_is_active` (`is_active` ASC) VISIBLE,
  INDEX `idx_is_international` (`is_international` ASC) VISIBLE,
  INDEX `idx_display_order` (`display_order` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 11
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci
COMMENT = 'Master table for all types of student dues/fees';


-- -----------------------------------------------------
-- Table `temco_db`.`duration_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`duration_type` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `type` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 3
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`org_departments`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`org_departments` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `general_organization_profile_id` INT NOT NULL,
  `departments_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_org_departments_general_organization_profile1_idx` (`general_organization_profile_id` ASC) VISIBLE,
  INDEX `fk_org_departments_departments1_idx` (`departments_id` ASC) VISIBLE,
  CONSTRAINT `fk_org_departments_departments1`
    FOREIGN KEY (`departments_id`)
    REFERENCES `temco_db`.`departments` (`id`),
  CONSTRAINT `fk_org_departments_general_organization_profile1`
    FOREIGN KEY (`general_organization_profile_id`)
    REFERENCES `temco_db`.`general_organization_profile` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 3
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`employee`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`employee` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `epf_number` VARCHAR(45) NULL DEFAULT NULL,
  `org_departments_id` INT NULL DEFAULT NULL,
  `general_user_profile_id` INT NULL DEFAULT NULL,
  `reg_date` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_employee_org_departments1_idx` (`org_departments_id` ASC) VISIBLE,
  INDEX `fk_employee_general_user_profile1_idx` (`general_user_profile_id` ASC) VISIBLE,
  CONSTRAINT `fk_employee_general_user_profile1`
    FOREIGN KEY (`general_user_profile_id`)
    REFERENCES `temco_db`.`general_user_profile` (`id`),
  CONSTRAINT `fk_employee_org_departments1`
    FOREIGN KEY (`org_departments_id`)
    REFERENCES `temco_db`.`org_departments` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 8
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`employement_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`employement_type` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `type` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 4
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`employement_type_history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`employement_type_history` (
  `id` INT NOT NULL,
  `date` DATE NULL DEFAULT NULL,
  `member_id` INT NOT NULL,
  `employement_type_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_employee_type_history_member1_idx` (`member_id` ASC) VISIBLE,
  INDEX `fk_employement_type_history_employement_type1_idx` (`employement_type_id` ASC) VISIBLE,
  CONSTRAINT `fk_employee_type_history_member1`
    FOREIGN KEY (`member_id`)
    REFERENCES `temco_db`.`member` (`id`),
  CONSTRAINT `fk_employement_type_history_employement_type1`
    FOREIGN KEY (`employement_type_id`)
    REFERENCES `temco_db`.`employement_type` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`flyway_schema_history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`flyway_schema_history` (
  `installed_rank` INT NOT NULL,
  `version` VARCHAR(50) NULL DEFAULT NULL,
  `description` VARCHAR(200) NOT NULL,
  `type` VARCHAR(20) NOT NULL,
  `script` VARCHAR(1000) NOT NULL,
  `checksum` INT NULL DEFAULT NULL,
  `installed_by` VARCHAR(100) NOT NULL,
  `installed_on` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `execution_time` INT NOT NULL,
  `success` TINYINT(1) NOT NULL,
  PRIMARY KEY (`installed_rank`),
  INDEX `flyway_schema_history_s_idx` (`success` ASC) VISIBLE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`general_journal_entry`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`general_journal_entry` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(45) NULL DEFAULT NULL,
  `amount` DOUBLE NOT NULL,
  `date` DATETIME NULL DEFAULT NULL,
  `is_active` INT NULL DEFAULT NULL,
  `cheque_no` VARCHAR(45) NULL DEFAULT NULL,
  `transaction_type_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_general_journal_entry_transaction_type1_idx` (`transaction_type_id` ASC) VISIBLE,
  CONSTRAINT `fk_general_journal_entry_transaction_type1`
    FOREIGN KEY (`transaction_type_id`)
    REFERENCES `temco_db`.`transaction_type` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`general_journal_entry_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`general_journal_entry_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `general_journal_entry_id_main` INT NOT NULL,
  `general_journal_entry_sub` INT NOT NULL,
  `is_active` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_general_journal_entry_manager_general_journal_entry1_idx` (`general_journal_entry_id_main` ASC) VISIBLE,
  INDEX `fk_general_journal_entry_manager_general_journal_entry2_idx` (`general_journal_entry_sub` ASC) VISIBLE,
  CONSTRAINT `fk_general_journal_entry_manager_general_journal_entry1`
    FOREIGN KEY (`general_journal_entry_id_main`)
    REFERENCES `temco_db`.`general_journal_entry` (`id`),
  CONSTRAINT `fk_general_journal_entry_manager_general_journal_entry2`
    FOREIGN KEY (`general_journal_entry_sub`)
    REFERENCES `temco_db`.`general_journal_entry` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`gop_has_member`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`gop_has_member` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `general_organization_profile_id` INT NOT NULL,
  `member_id` INT NOT NULL,
  `start_date` DATETIME NULL DEFAULT NULL,
  `end_date` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_general_organization_profile_has_member_member1_idx` (`member_id` ASC) VISIBLE,
  INDEX `fk_general_organization_profile_has_member_general_organiza_idx` (`general_organization_profile_id` ASC) VISIBLE,
  CONSTRAINT `fk_general_organization_profile_has_member_general_organizati1`
    FOREIGN KEY (`general_organization_profile_id`)
    REFERENCES `temco_db`.`general_organization_profile` (`id`),
  CONSTRAINT `fk_general_organization_profile_has_member_member1`
    FOREIGN KEY (`member_id`)
    REFERENCES `temco_db`.`member` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 156
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`gross_anual_turnover`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`gross_anual_turnover` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `turnover` VARCHAR(45) NULL DEFAULT NULL,
  `business_information_id` INT NOT NULL,
  `year` DATE NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_gross_anual_turnover_business_information1_idx` (`business_information_id` ASC) VISIBLE,
  CONSTRAINT `fk_gross_anual_turnover_business_information1`
    FOREIGN KEY (`business_information_id`)
    REFERENCES `temco_db`.`business_information` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 93
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`loan_applicant_gurantor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`loan_applicant_gurantor` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `date` DATE NULL DEFAULT NULL,
  `member_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_loan_applicant_gurantor_member1_idx` (`member_id` ASC) VISIBLE,
  CONSTRAINT `fk_loan_applicant_gurantor_member1`
    FOREIGN KEY (`member_id`)
    REFERENCES `temco_db`.`member` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 864
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`gurantor_count`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`gurantor_count` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `value` VARCHAR(24) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 3
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`gurantor_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`gurantor_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `loan_applicant_and_gurantors_id` INT NOT NULL,
  `loan_applicant_id` INT NOT NULL,
  `gurantor_count_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_gurantor_loan_applicant_and_gurantors1_idx` (`loan_applicant_and_gurantors_id` ASC) VISIBLE,
  INDEX `fk_gurantor_loan_applicant1_idx` (`loan_applicant_id` ASC) VISIBLE,
  INDEX `fk_gurantor_manager_gurantor_count1_idx` (`gurantor_count_id` ASC) VISIBLE,
  CONSTRAINT `fk_gurantor_loan_applicant1`
    FOREIGN KEY (`loan_applicant_id`)
    REFERENCES `temco_db`.`loan_applicant_gurantor` (`id`),
  CONSTRAINT `fk_gurantor_loan_applicant_and_gurantors1`
    FOREIGN KEY (`loan_applicant_and_gurantors_id`)
    REFERENCES `temco_db`.`loan_applicant_gurantor` (`id`),
  CONSTRAINT `fk_gurantor_manager_gurantor_count1`
    FOREIGN KEY (`gurantor_count_id`)
    REFERENCES `temco_db`.`gurantor_count` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 83
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`guarantor_documents`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`guarantor_documents` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `url` TEXT NULL DEFAULT NULL,
  `gurantor_manager_id` INT NOT NULL,
  `document_type_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_guarantor_documents_gurantor_manager1_idx` (`gurantor_manager_id` ASC) VISIBLE,
  INDEX `fk_guarantor_documents_document_type1_idx` (`document_type_id` ASC) VISIBLE,
  CONSTRAINT `fk_guarantor_documents_document_type1`
    FOREIGN KEY (`document_type_id`)
    REFERENCES `temco_db`.`member_documents` (`id`),
  CONSTRAINT `fk_guarantor_documents_gurantor_manager1`
    FOREIGN KEY (`gurantor_manager_id`)
    REFERENCES `temco_db`.`gurantor_manager` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 15
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`gurantor_salary_info`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`gurantor_salary_info` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `salary` DOUBLE NULL DEFAULT NULL,
  `gurantor_manager_id` INT NOT NULL,
  PRIMARY KEY (`id`, `gurantor_manager_id`),
  INDEX `fk_gurantor_salary_info_gurantor_manager1_idx` (`gurantor_manager_id` ASC) VISIBLE,
  CONSTRAINT `fk_gurantor_salary_info_gurantor_manager1`
    FOREIGN KEY (`gurantor_manager_id`)
    REFERENCES `temco_db`.`gurantor_manager` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`img_path_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`img_path_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `document_creator_id` INT NOT NULL,
  `document_image_path_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_img_path_manager_document_creator1_idx` (`document_creator_id` ASC) VISIBLE,
  INDEX `fk_img_path_manager_document_image_path1_idx` (`document_image_path_id` ASC) VISIBLE,
  CONSTRAINT `fk_img_path_manager_document_creator1`
    FOREIGN KEY (`document_creator_id`)
    REFERENCES `temco_db`.`document_creator` (`id`),
  CONSTRAINT `fk_img_path_manager_document_image_path1`
    FOREIGN KEY (`document_image_path_id`)
    REFERENCES `temco_db`.`document_image_path` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`intake`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`intake` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `intake_id` INT NULL DEFAULT NULL,
  `name` VARCHAR(1000) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `intake_id_UNIQUE` (`intake_id` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 139
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`status`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`status` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 5
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`intake_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`intake_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `intake_id` INT NOT NULL,
  `loan_customer_id` INT NOT NULL,
  `Status_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_intake_manager_loan_customer1_idx` (`loan_customer_id` ASC) VISIBLE,
  INDEX `fk_intake_manager_Status1_idx` (`Status_id` ASC) VISIBLE,
  INDEX `fk_intake_manager_intake1_idx` (`intake_id` ASC) VISIBLE,
  CONSTRAINT `fk_intake_manager_intake1`
    FOREIGN KEY (`intake_id`)
    REFERENCES `temco_db`.`intake` (`id`),
  CONSTRAINT `fk_intake_manager_loan_customer1`
    FOREIGN KEY (`loan_customer_id`)
    REFERENCES `temco_db`.`loan_customer` (`id`),
  CONSTRAINT `fk_intake_manager_Status1`
    FOREIGN KEY (`Status_id`)
    REFERENCES `temco_db`.`status` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1565
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`loan_term`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`loan_term` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) NULL DEFAULT NULL,
  `created_date` DATETIME(6) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 5
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`loan_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`loan_type` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) NULL DEFAULT NULL,
  `created_date` DATETIME(6) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 5
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`loan_interest_rate`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`loan_interest_rate` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `rate` DOUBLE NULL DEFAULT NULL,
  `created_date` DATETIME(6) NULL DEFAULT NULL,
  `loan_term_id` INT NULL DEFAULT NULL,
  `loan_type_id` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_loan_interest_rate_loan_term1_idx` (`loan_term_id` ASC) VISIBLE,
  INDEX `fk_loan_interest_rate_loan_type1_idx` (`loan_type_id` ASC) VISIBLE,
  CONSTRAINT `fk_loan_interest_rate_loan_term1`
    FOREIGN KEY (`loan_term_id`)
    REFERENCES `temco_db`.`loan_term` (`id`),
  CONSTRAINT `fk_loan_interest_rate_loan_type1`
    FOREIGN KEY (`loan_type_id`)
    REFERENCES `temco_db`.`loan_type` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 14
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`repayment_period`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`repayment_period` (
  `id` INT NOT NULL,
  `period` VARCHAR(45) NULL DEFAULT NULL,
  `date` DATE NULL DEFAULT NULL,
  `is_active` TINYINT NULL DEFAULT NULL,
  `Loan_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_repayment_period_Loan1_idx` (`Loan_id` ASC) VISIBLE,
  CONSTRAINT `fk_repayment_period_Loan1`
    FOREIGN KEY (`Loan_id`)
    REFERENCES `temco_db`.`loan` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`penalty`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`penalty` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `value` DOUBLE NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 2
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`loan_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`loan_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `reference_id` VARCHAR(45) NULL DEFAULT NULL,
  `loan_capital_amount` DOUBLE NOT NULL,
  `total_interest` DOUBLE NULL DEFAULT NULL,
  `monthly_installement` DOUBLE NOT NULL,
  `date` DATE NULL DEFAULT NULL,
  `updated_at` DATETIME NULL DEFAULT NULL,
  `repayment_period_id` INT NOT NULL,
  `loan_applicant_and_gurantors_id` INT NOT NULL,
  `penalty_id` INT NOT NULL,
  `member_bank_accounts_id` INT NOT NULL,
  `verification_toke` VARCHAR(345) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_loan_applicant_request_repayment_period1_idx` (`repayment_period_id` ASC) VISIBLE,
  INDEX `fk_loan_request_loan_applicant_and_gurantors1_idx` (`loan_applicant_and_gurantors_id` ASC) VISIBLE,
  INDEX `fk_loan_manager_penalty1_idx` (`penalty_id` ASC) VISIBLE,
  INDEX `fk_loan_manager_member_bank_accounts1_idx` (`member_bank_accounts_id` ASC) VISIBLE,
  INDEX `idx_loan_reference` (`reference_id` ASC) VISIBLE,
  INDEX `idx_loan_date` (`date` ASC) VISIBLE,
  INDEX `idx_fk_loan_member_account` (`member_bank_accounts_id` ASC) VISIBLE,
  INDEX `idx_fk_loan_penalty` (`penalty_id` ASC) VISIBLE,
  INDEX `idx_fk_loan_repayment` (`repayment_period_id` ASC) VISIBLE,
  CONSTRAINT `fk_loan_applicant_request_repayment_period1`
    FOREIGN KEY (`repayment_period_id`)
    REFERENCES `temco_db`.`repayment_period` (`id`),
  CONSTRAINT `fk_loan_manager_member_bank_accounts1`
    FOREIGN KEY (`member_bank_accounts_id`)
    REFERENCES `temco_db`.`member_bank_accounts` (`id`),
  CONSTRAINT `fk_loan_manager_penalty1`
    FOREIGN KEY (`penalty_id`)
    REFERENCES `temco_db`.`penalty` (`id`),
  CONSTRAINT `fk_loan_request_loan_applicant_and_gurantors1`
    FOREIGN KEY (`loan_applicant_and_gurantors_id`)
    REFERENCES `temco_db`.`loan_applicant_gurantor` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 802
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`interest_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`interest_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `Loan_id` INT NOT NULL,
  `loan_interest_rate_id` INT NOT NULL,
  `loan_manager_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_table1_Loan1_idx` (`Loan_id` ASC) VISIBLE,
  INDEX `fk_table1_loan_interest_rate1_idx` (`loan_interest_rate_id` ASC) VISIBLE,
  INDEX `fk_table1_loan_manager2_idx` (`loan_manager_id` ASC) VISIBLE,
  CONSTRAINT `fk_table1_Loan1`
    FOREIGN KEY (`Loan_id`)
    REFERENCES `temco_db`.`loan` (`id`),
  CONSTRAINT `fk_table1_loan_interest_rate1`
    FOREIGN KEY (`loan_interest_rate_id`)
    REFERENCES `temco_db`.`loan_interest_rate` (`id`),
  CONSTRAINT `fk_table1_loan_manager2`
    FOREIGN KEY (`loan_manager_id`)
    REFERENCES `temco_db`.`loan_manager` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 72
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`interface_menu`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`interface_menu` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`interface_menu_gop_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`interface_menu_gop_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `general_organization_profile_id` INT NOT NULL,
  `interface_menu_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_interface_menu_gop_manager_general_organization_profile1_idx` (`general_organization_profile_id` ASC) VISIBLE,
  INDEX `fk_interface_menu_gop_manager_interface_menu1_idx` (`interface_menu_id` ASC) VISIBLE,
  CONSTRAINT `fk_interface_menu_gop_manager_general_organization_profile1`
    FOREIGN KEY (`general_organization_profile_id`)
    REFERENCES `temco_db`.`general_organization_profile` (`id`),
  CONSTRAINT `fk_interface_menu_gop_manager_interface_menu1`
    FOREIGN KEY (`interface_menu_id`)
    REFERENCES `temco_db`.`interface_menu` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`interface_sub_menu`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`interface_sub_menu` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`loan_applicant_has_branch`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`loan_applicant_has_branch` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `loan_applicant_gurantor_id` INT NOT NULL,
  `loan_manager_id` INT NOT NULL,
  `organization_branches_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_loan_applicant_has_branch_loan_applicant_gurantor1_idx` (`loan_applicant_gurantor_id` ASC) VISIBLE,
  INDEX `fk_loan_applicant_has_branch_loan_manager1_idx` (`loan_manager_id` ASC) VISIBLE,
  INDEX `fk_loan_applicant_has_branch_organization_branches1_idx` (`organization_branches_id` ASC) VISIBLE,
  CONSTRAINT `fk_loan_applicant_has_branch_loan_applicant_gurantor1`
    FOREIGN KEY (`loan_applicant_gurantor_id`)
    REFERENCES `temco_db`.`loan_applicant_gurantor` (`id`),
  CONSTRAINT `fk_loan_applicant_has_branch_loan_manager1`
    FOREIGN KEY (`loan_manager_id`)
    REFERENCES `temco_db`.`loan_manager` (`id`),
  CONSTRAINT `fk_loan_applicant_has_branch_organization_branches1`
    FOREIGN KEY (`organization_branches_id`)
    REFERENCES `temco_db`.`organization_branches` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 58
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`loan_documents_scheduler`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`loan_documents_scheduler` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `loan_manager_id` INT NOT NULL,
  `submission_date` DATE NULL DEFAULT NULL,
  `is_submitted` TINYINT NULL DEFAULT NULL,
  `member_id` INT NOT NULL,
  `document_creator_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_loan_documents_manager_loan_manager1_idx` (`loan_manager_id` ASC) VISIBLE,
  INDEX `fk_loan_documents_scheduler_member1_idx` (`member_id` ASC) VISIBLE,
  INDEX `fk_loan_documents_scheduler_document_creator1_idx` (`document_creator_id` ASC) VISIBLE,
  INDEX `idx_loan_doc_scheduler` (`loan_manager_id` ASC, `submission_date` ASC) VISIBLE,
  CONSTRAINT `fk_loan_documents_manager_loan_manager1`
    FOREIGN KEY (`loan_manager_id`)
    REFERENCES `temco_db`.`loan_manager` (`id`),
  CONSTRAINT `fk_loan_documents_scheduler_document_creator1`
    FOREIGN KEY (`document_creator_id`)
    REFERENCES `temco_db`.`created_document` (`id`),
  CONSTRAINT `fk_loan_documents_scheduler_member1`
    FOREIGN KEY (`member_id`)
    REFERENCES `temco_db`.`member` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 24
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`loan_document_status_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`loan_document_status_manager` (
  `id` INT NOT NULL,
  `date` DATETIME NULL DEFAULT NULL,
  `documents_submission_status_id` INT NOT NULL,
  `loan_documents_scheduler_id` INT NOT NULL,
  `universal_user_document_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_loan_document_review_history_documents_submission_status_idx` (`documents_submission_status_id` ASC) VISIBLE,
  INDEX `fk_loan_document_status_manager_loan_documents_scheduler1_idx` (`loan_documents_scheduler_id` ASC) VISIBLE,
  INDEX `fk_loan_document_status_manager_universal_user_document1_idx` (`universal_user_document_id` ASC) VISIBLE,
  CONSTRAINT `fk_loan_document_review_history_documents_submission_status1`
    FOREIGN KEY (`documents_submission_status_id`)
    REFERENCES `temco_db`.`documents_submission_status` (`id`),
  CONSTRAINT `fk_loan_document_status_manager_loan_documents_scheduler1`
    FOREIGN KEY (`loan_documents_scheduler_id`)
    REFERENCES `temco_db`.`loan_documents_scheduler` (`id`),
  CONSTRAINT `fk_loan_document_status_manager_universal_user_document1`
    FOREIGN KEY (`universal_user_document_id`)
    REFERENCES `temco_db`.`universal_user_document` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`loan_doc_comment`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`loan_doc_comment` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `loan_document_review_history_id` INT NOT NULL,
  `comment_type_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_loan_doc_comment_loan_document_review_history1_idx` (`loan_document_review_history_id` ASC) VISIBLE,
  INDEX `fk_loan_doc_comment_comment_type1_idx` (`comment_type_id` ASC) VISIBLE,
  CONSTRAINT `fk_loan_doc_comment_comment_type1`
    FOREIGN KEY (`comment_type_id`)
    REFERENCES `temco_db`.`comment_type` (`id`),
  CONSTRAINT `fk_loan_doc_comment_loan_document_review_history1`
    FOREIGN KEY (`loan_document_review_history_id`)
    REFERENCES `temco_db`.`loan_document_status_manager` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`loan_duration`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`loan_duration` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `date` DATE NULL DEFAULT NULL,
  `duration_type_id` INT NOT NULL,
  `Loan_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_loan_duration_duration_type1_idx` (`duration_type_id` ASC) VISIBLE,
  INDEX `fk_loan_duration_Loan1_idx` (`Loan_id` ASC) VISIBLE,
  CONSTRAINT `fk_loan_duration_duration_type1`
    FOREIGN KEY (`duration_type_id`)
    REFERENCES `temco_db`.`duration_type` (`id`),
  CONSTRAINT `fk_loan_duration_Loan1`
    FOREIGN KEY (`Loan_id`)
    REFERENCES `temco_db`.`loan` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 2
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`loan_installement_plan`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`loan_installement_plan` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `repayment_date` DATE NULL DEFAULT NULL,
  `opening_balance` FLOAT NULL DEFAULT NULL,
  `principal_amount` FLOAT NULL DEFAULT NULL,
  `monthly_interest` FLOAT NULL DEFAULT NULL,
  `paid_capital` FLOAT NULL DEFAULT NULL,
  `loan_manager_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Loan_installement_plan_loan_manager1_idx` (`loan_manager_id` ASC) VISIBLE,
  INDEX `idx_installment_loan` (`loan_manager_id` ASC, `repayment_date` ASC) VISIBLE,
  CONSTRAINT `fk_Loan_installement_plan_loan_manager1`
    FOREIGN KEY (`loan_manager_id`)
    REFERENCES `temco_db`.`loan_manager` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 557
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`voucher_status`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`voucher_status` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 6
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`user_login_group`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`user_login_group` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `is_active` TINYBLOB NULL DEFAULT NULL,
  `max_login_attempt` INT NULL DEFAULT NULL,
  `is_first_time` TINYBLOB NULL DEFAULT NULL,
  `count_attempt` INT NULL DEFAULT NULL,
  `general_organization_profile_id` INT NULL DEFAULT NULL,
  `user_role_id` INT NULL DEFAULT NULL,
  `user_login_id` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_user_login_group_general_organization_profile1_idx` (`general_organization_profile_id` ASC) VISIBLE,
  INDEX `fk_user_login_group_user_role1_idx` (`user_role_id` ASC) VISIBLE,
  INDEX `fk_user_login_group_user_login1_idx` (`user_login_id` ASC) VISIBLE,
  CONSTRAINT `fk_user_login_group_general_organization_profile1`
    FOREIGN KEY (`general_organization_profile_id`)
    REFERENCES `temco_db`.`general_organization_profile` (`id`),
  CONSTRAINT `fk_user_login_group_user_login1`
    FOREIGN KEY (`user_login_id`)
    REFERENCES `temco_db`.`user_login` (`id`),
  CONSTRAINT `fk_user_login_group_user_role1`
    FOREIGN KEY (`user_role_id`)
    REFERENCES `temco_db`.`user_role` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 99
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`login_session`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`login_session` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `start_time` DATETIME NULL DEFAULT NULL,
  `end_time` DATETIME NULL DEFAULT NULL,
  `ip` VARCHAR(45) NULL DEFAULT NULL,
  `user_login_id` INT NULL DEFAULT NULL,
  `general_organization_profile_id` INT NULL DEFAULT NULL,
  `user_login_group_id` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_login_session_user_login1_idx` (`user_login_id` ASC) VISIBLE,
  INDEX `fk_login_session_general_organization_profile1_idx` (`general_organization_profile_id` ASC) VISIBLE,
  INDEX `fk_login_session_user_login_group1_idx` (`user_login_group_id` ASC) VISIBLE,
  INDEX `idx_login_session_user_time` (`user_login_id` ASC, `start_time` ASC) VISIBLE,
  CONSTRAINT `fk_login_session_general_organization_profile1`
    FOREIGN KEY (`general_organization_profile_id`)
    REFERENCES `temco_db`.`general_organization_profile` (`id`),
  CONSTRAINT `fk_login_session_user_login1`
    FOREIGN KEY (`user_login_id`)
    REFERENCES `temco_db`.`user_login` (`id`),
  CONSTRAINT `fk_login_session_user_login_group1`
    FOREIGN KEY (`user_login_group_id`)
    REFERENCES `temco_db`.`user_login_group` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1057
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`voucher_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`voucher_type` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 13
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`voucher`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`voucher` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `amount` DOUBLE NULL DEFAULT NULL,
  `date` DATETIME(6) NULL DEFAULT NULL,
  `updated_at` DATETIME NULL DEFAULT NULL,
  `voucher_type_id` INT NOT NULL,
  `bank_account_id` INT NOT NULL,
  `login_session_id` INT NOT NULL,
  `spot_member_id` INT NULL DEFAULT NULL,
  `voucher_status_id` INT NOT NULL,
  `is_active` TINYBLOB NULL DEFAULT NULL,
  `org_departments_id` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_voucher_payment_category1_idx` (`voucher_type_id` ASC) VISIBLE,
  INDEX `fk_voucher_bank_account1_idx` (`bank_account_id` ASC) VISIBLE,
  INDEX `fk_voucher_login_session1_idx` (`login_session_id` ASC) VISIBLE,
  INDEX `fk_voucher_spot_member1_idx` (`spot_member_id` ASC) VISIBLE,
  INDEX `fk_payment_request_payment_request_status1_idx` (`voucher_status_id` ASC) VISIBLE,
  INDEX `fk_voucher_org_departments1_idx` (`org_departments_id` ASC) VISIBLE,
  INDEX `idx_voucher_date_status` (`date` ASC, `voucher_status_id` ASC) VISIBLE,
  INDEX `idx_fk_voucher_type` (`voucher_type_id` ASC) VISIBLE,
  INDEX `idx_fk_voucher_status` (`voucher_status_id` ASC) VISIBLE,
  INDEX `idx_fk_voucher_bank` (`bank_account_id` ASC) VISIBLE,
  CONSTRAINT `fk_payment_request_payment_request_status1`
    FOREIGN KEY (`voucher_status_id`)
    REFERENCES `temco_db`.`voucher_status` (`id`),
  CONSTRAINT `fk_voucher_bank_account1`
    FOREIGN KEY (`bank_account_id`)
    REFERENCES `temco_db`.`bank_account` (`id`),
  CONSTRAINT `fk_voucher_login_session1`
    FOREIGN KEY (`login_session_id`)
    REFERENCES `temco_db`.`login_session` (`id`),
  CONSTRAINT `fk_voucher_org_departments1`
    FOREIGN KEY (`org_departments_id`)
    REFERENCES `temco_db`.`org_departments` (`id`),
  CONSTRAINT `fk_voucher_payment_category1`
    FOREIGN KEY (`voucher_type_id`)
    REFERENCES `temco_db`.`voucher_type` (`id`),
  CONSTRAINT `fk_voucher_spot_member1`
    FOREIGN KEY (`spot_member_id`)
    REFERENCES `temco_db`.`spot_member` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 4
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`loan_payment_history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`loan_payment_history` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `Loan_installement_plan_id` INT NOT NULL,
  `loan_manager_id` INT NOT NULL,
  `voucher_id` INT NOT NULL,
  `monthly` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_table1_Loan_installement_plan1_idx` (`Loan_installement_plan_id` ASC) VISIBLE,
  INDEX `fk_table1_loan_manager3_idx` (`loan_manager_id` ASC) VISIBLE,
  INDEX `fk_table1_voucher1_idx` (`voucher_id` ASC) VISIBLE,
  CONSTRAINT `fk_table1_Loan_installement_plan1`
    FOREIGN KEY (`Loan_installement_plan_id`)
    REFERENCES `temco_db`.`loan_installement_plan` (`id`),
  CONSTRAINT `fk_table1_loan_manager3`
    FOREIGN KEY (`loan_manager_id`)
    REFERENCES `temco_db`.`loan_manager` (`id`),
  CONSTRAINT `fk_table1_voucher1`
    FOREIGN KEY (`voucher_id`)
    REFERENCES `temco_db`.`voucher` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`loan_status`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`loan_status` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 8
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`loan_status_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`loan_status_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `loan_manager_id` INT NOT NULL,
  `loan_status_id` INT NOT NULL,
  `date` DATETIME NULL DEFAULT NULL,
  `updated_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_table1_loan_manager1_idx` (`loan_manager_id` ASC) VISIBLE,
  INDEX `fk_table1_loan_status1_idx` (`loan_status_id` ASC) VISIBLE,
  CONSTRAINT `fk_table1_loan_manager1`
    FOREIGN KEY (`loan_manager_id`)
    REFERENCES `temco_db`.`loan_manager` (`id`),
  CONSTRAINT `fk_table1_loan_status1`
    FOREIGN KEY (`loan_status_id`)
    REFERENCES `temco_db`.`loan_status` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 120
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`materialized_student_loan_eligible_student_table`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`materialized_student_loan_eligible_student_table` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `gup_id` INT NULL DEFAULT NULL,
  `nic` VARCHAR(45) NULL DEFAULT NULL,
  `first_name` VARCHAR(255) NULL DEFAULT NULL,
  `last_name` VARCHAR(255) NULL DEFAULT NULL,
  `name_with_initials` VARCHAR(255) NULL DEFAULT NULL,
  `dob` DATE NULL DEFAULT NULL,
  `email` VARCHAR(255) NULL DEFAULT NULL,
  `mobile_no` VARCHAR(45) NULL DEFAULT NULL,
  `address_line1` VARCHAR(255) NULL DEFAULT NULL,
  `address_line2` VARCHAR(255) NULL DEFAULT NULL,
  `address_line3` VARCHAR(255) NULL DEFAULT NULL,
  `scholarship` DOUBLE NULL DEFAULT NULL,
  `payment_option` VARCHAR(100) NULL DEFAULT NULL,
  `course_due` DOUBLE NULL DEFAULT NULL,
  `international_awarding_body_diploma_due` DOUBLE NULL DEFAULT NULL,
  `international_awarding_body_diploma_currency` VARCHAR(10) NULL DEFAULT NULL,
  `international_awarding_body_higher_diploma_due` DOUBLE NULL DEFAULT NULL,
  `international_awarding_body_higher_diploma_currency` VARCHAR(10) NULL DEFAULT NULL,
  `international_university_due` DOUBLE NULL DEFAULT NULL,
  `international_university_currency` VARCHAR(10) NULL DEFAULT NULL,
  `service_charges_presentage` DOUBLE NULL DEFAULT NULL,
  `total_due` DOUBLE NULL DEFAULT NULL,
  `gender_type` VARCHAR(45) NULL DEFAULT NULL,
  `verification_token` VARCHAR(100) NULL DEFAULT NULL,
  `branch_name` VARCHAR(45) NULL DEFAULT NULL,
  `intake_id` INT NULL DEFAULT NULL,
  `intake_name` VARCHAR(255) NULL DEFAULT NULL,
  `profile_create_date` DATE NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 3836
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`member_has_member`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`member_has_member` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `interducee_member_id` INT NULL DEFAULT NULL,
  `interducer_member_id` INT NULL DEFAULT NULL,
  `date_intro` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_member_has_member_member2_idx` (`interducer_member_id` ASC) VISIBLE,
  INDEX `fk_member_has_member_member1_idx` (`interducee_member_id` ASC) VISIBLE,
  CONSTRAINT `fk_member_has_member_member1`
    FOREIGN KEY (`interducee_member_id`)
    REFERENCES `temco_db`.`member` (`id`),
  CONSTRAINT `fk_member_has_member_member2`
    FOREIGN KEY (`interducer_member_id`)
    REFERENCES `temco_db`.`member` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`member_organizations_history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`member_organizations_history` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `date` DATE NULL DEFAULT NULL,
  `is_active` TINYINT NULL DEFAULT NULL,
  `general_organization_profile_id` INT NOT NULL,
  `member_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_member_organizations_general_organization_profile1_idx` (`general_organization_profile_id` ASC) VISIBLE,
  INDEX `fk_member_organizations_history_member1_idx` (`member_id` ASC) VISIBLE,
  INDEX `idx_member_org_history` (`member_id` ASC, `is_active` ASC) VISIBLE,
  CONSTRAINT `fk_member_organizations_general_organization_profile1`
    FOREIGN KEY (`general_organization_profile_id`)
    REFERENCES `temco_db`.`general_organization_profile` (`id`),
  CONSTRAINT `fk_member_organizations_history_member1`
    FOREIGN KEY (`member_id`)
    REFERENCES `temco_db`.`member` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 336
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`membership_level`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`membership_level` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `registration_fee` DOUBLE NULL DEFAULT NULL,
  `monthly_share_purches` DOUBLE NULL DEFAULT NULL,
  `monthly_saving_amount` DOUBLE NULL DEFAULT NULL,
  `monthly_share_purches_qty` DOUBLE NULL DEFAULT NULL,
  `monthly_share_purches_qty_value` DOUBLE NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`share_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`share_type` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`share_certificate`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`share_certificate` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `date` DATETIME(6) NULL DEFAULT NULL,
  `share_tranfer_date` DATETIME NULL DEFAULT NULL,
  `purches_date` DATETIME NULL DEFAULT NULL,
  `share_value` DOUBLE NULL DEFAULT NULL,
  `no_of_shares` INT NULL DEFAULT NULL,
  `share_type_id` INT NOT NULL,
  `onwer_member_id` INT NULL DEFAULT NULL,
  `owner_general_organization_profile_id` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_share_certificate_share_type1_idx` (`share_type_id` ASC) VISIBLE,
  INDEX `fk_share_certificate_member1_idx` (`onwer_member_id` ASC) VISIBLE,
  INDEX `fk_share_certificate_general_organization_profile1_idx` (`owner_general_organization_profile_id` ASC) VISIBLE,
  CONSTRAINT `fk_share_certificate_general_organization_profile1`
    FOREIGN KEY (`owner_general_organization_profile_id`)
    REFERENCES `temco_db`.`general_organization_profile` (`id`),
  CONSTRAINT `fk_share_certificate_member1`
    FOREIGN KEY (`onwer_member_id`)
    REFERENCES `temco_db`.`member` (`id`),
  CONSTRAINT `fk_share_certificate_share_type1`
    FOREIGN KEY (`share_type_id`)
    REFERENCES `temco_db`.`share_type` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`membership_level_has_share_certificate`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`membership_level_has_share_certificate` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `membership_level_id` INT NULL DEFAULT NULL,
  `share_certificate_id` INT NULL DEFAULT NULL,
  `date` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_membership_level_has_share_certificate_share_certificate_idx` (`share_certificate_id` ASC) VISIBLE,
  INDEX `fk_membership_level_has_share_certificate_membership_level1_idx` (`membership_level_id` ASC) VISIBLE,
  CONSTRAINT `fk_membership_level_has_share_certificate_membership_level1`
    FOREIGN KEY (`membership_level_id`)
    REFERENCES `temco_db`.`membership_level` (`id`),
  CONSTRAINT `fk_membership_level_has_share_certificate_share_certificate1`
    FOREIGN KEY (`share_certificate_id`)
    REFERENCES `temco_db`.`share_certificate` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`priority`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`priority` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `type` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 4
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`mobile_no`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`mobile_no` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `mobile_no` VARCHAR(45) NULL DEFAULT NULL,
  `loan_customer_id` INT NOT NULL,
  `priority_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_mobile_no_loan_customer1_idx` (`loan_customer_id` ASC) VISIBLE,
  INDEX `fk_mobile_no_priority1_idx` (`priority_id` ASC) VISIBLE,
  CONSTRAINT `fk_mobile_no_loan_customer1`
    FOREIGN KEY (`loan_customer_id`)
    REFERENCES `temco_db`.`loan_customer` (`id`),
  CONSTRAINT `fk_mobile_no_priority1`
    FOREIGN KEY (`priority_id`)
    REFERENCES `temco_db`.`priority` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1599
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`relationship`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`relationship` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 11
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`nominess`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`nominess` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `relationship_id` INT NOT NULL,
  `post_inherite_presentage` DOUBLE NULL DEFAULT NULL,
  `nominesscol` VARCHAR(45) NULL DEFAULT NULL,
  `member_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_nominess_relationship1_idx` (`relationship_id` ASC) VISIBLE,
  INDEX `fk_nominess_member1_idx` (`member_id` ASC) VISIBLE,
  CONSTRAINT `fk_nominess_member1`
    FOREIGN KEY (`member_id`)
    REFERENCES `temco_db`.`member` (`id`),
  CONSTRAINT `fk_nominess_relationship1`
    FOREIGN KEY (`relationship_id`)
    REFERENCES `temco_db`.`relationship` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`org_branchers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`org_branchers` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `general_organization_profile_id` INT NOT NULL,
  `divisional_secretarial_id` INT NOT NULL,
  `branch_level_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_temco_branchers_general_organization_profile1_idx` (`general_organization_profile_id` ASC) VISIBLE,
  INDEX `fk_temco_branchers_divisional_secretarial1_idx` (`divisional_secretarial_id` ASC) VISIBLE,
  INDEX `fk_temco_branchers_branch_level1_idx` (`branch_level_id` ASC) VISIBLE,
  CONSTRAINT `fk_temco_branchers_branch_level1`
    FOREIGN KEY (`branch_level_id`)
    REFERENCES `temco_db`.`branch_level` (`id`),
  CONSTRAINT `fk_temco_branchers_divisional_secretarial1`
    FOREIGN KEY (`divisional_secretarial_id`)
    REFERENCES `temco_db`.`divisional_secretarial` (`id`),
  CONSTRAINT `fk_temco_branchers_general_organization_profile1`
    FOREIGN KEY (`general_organization_profile_id`)
    REFERENCES `temco_db`.`general_organization_profile` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`org_category`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`org_category` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `org_category_id` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_org_category_org_category1_idx` (`org_category_id` ASC) VISIBLE,
  CONSTRAINT `fk_org_category_org_category1`
    FOREIGN KEY (`org_category_id`)
    REFERENCES `temco_db`.`org_category` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`org_category_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`org_category_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `general_organization_profile_id` INT NOT NULL,
  `org_category_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_org_category_manager_general_organization_profile1_idx` (`general_organization_profile_id` ASC) VISIBLE,
  INDEX `fk_org_category_manager_org_category1_idx` (`org_category_id` ASC) VISIBLE,
  CONSTRAINT `fk_org_category_manager_general_organization_profile1`
    FOREIGN KEY (`general_organization_profile_id`)
    REFERENCES `temco_db`.`general_organization_profile` (`id`),
  CONSTRAINT `fk_org_category_manager_org_category1`
    FOREIGN KEY (`org_category_id`)
    REFERENCES `temco_db`.`org_category` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`org_chat_of_account`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`org_chat_of_account` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `is_active` INT NULL DEFAULT NULL,
  `code` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`organization_sub_types`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`organization_sub_types` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  `organization_type_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_organization_sub_types_organization_type1_idx` (`organization_type_id` ASC) VISIBLE,
  CONSTRAINT `fk_organization_sub_types_organization_type1`
    FOREIGN KEY (`organization_type_id`)
    REFERENCES `temco_db`.`organization_type` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`pay_order_settlement_guide`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`pay_order_settlement_guide` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `date` DATE NULL DEFAULT NULL,
  `principal_amount` DOUBLE NULL DEFAULT NULL,
  `payble_discounted_amount` DOUBLE NULL DEFAULT NULL,
  `settlement_amount` DOUBLE NULL DEFAULT NULL,
  `branch_has_factoring_fee_id` INT NOT NULL,
  `loan_applicant_has_branch_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_table1_branch_has_factoring_fee1_idx` (`branch_has_factoring_fee_id` ASC) VISIBLE,
  INDEX `fk_pay_order_settlement_statement_loan_applicant_has_branch_idx` (`loan_applicant_has_branch_id` ASC) VISIBLE,
  CONSTRAINT `fk_pay_order_settlement_statement_loan_applicant_has_branch1`
    FOREIGN KEY (`loan_applicant_has_branch_id`)
    REFERENCES `temco_db`.`loan_applicant_has_branch` (`id`),
  CONSTRAINT `fk_table1_branch_has_factoring_fee1`
    FOREIGN KEY (`branch_has_factoring_fee_id`)
    REFERENCES `temco_db`.`branch_has_factoring_fee` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`pay_order_settlement_statement`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`pay_order_settlement_statement` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `date` DATE NULL DEFAULT NULL,
  `paid_amount` DOUBLE NULL DEFAULT NULL,
  `balance_due` DOUBLE NULL DEFAULT NULL,
  `pay_order_settlement_statement_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_pay_order_settlment_history_pay_order_settlement_stateme_idx` (`pay_order_settlement_statement_id` ASC) VISIBLE,
  CONSTRAINT `fk_pay_order_settlment_history_pay_order_settlement_statement1`
    FOREIGN KEY (`pay_order_settlement_statement_id`)
    REFERENCES `temco_db`.`pay_order_settlement_guide` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`pay_order_settlment_voucher_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`pay_order_settlment_voucher_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `date` DATE NULL DEFAULT NULL,
  `pay_order_settlement_guide_id` INT NOT NULL,
  `voucher_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_pay_order_settlment_voucher_manager_pay_order_settlement_idx` (`pay_order_settlement_guide_id` ASC) VISIBLE,
  INDEX `fk_pay_order_settlment_voucher_manager_voucher1_idx` (`voucher_id` ASC) VISIBLE,
  CONSTRAINT `fk_pay_order_settlment_voucher_manager_pay_order_settlement_g1`
    FOREIGN KEY (`pay_order_settlement_guide_id`)
    REFERENCES `temco_db`.`pay_order_settlement_guide` (`id`),
  CONSTRAINT `fk_pay_order_settlment_voucher_manager_voucher1`
    FOREIGN KEY (`voucher_id`)
    REFERENCES `temco_db`.`voucher` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`pay_sheet`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`pay_sheet` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `employment_type_id` INT NOT NULL,
  `gross_income` DOUBLE NULL DEFAULT NULL,
  `net_income` DOUBLE NULL DEFAULT NULL,
  `deductions` DOUBLE NULL DEFAULT NULL,
  `other_income` DOUBLE NULL DEFAULT NULL,
  `loan_applicant_gurantor_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_pay_sheet_loan_applicant_gurantor1_idx` (`loan_applicant_gurantor_id` ASC) VISIBLE,
  CONSTRAINT `fk_pay_sheet_loan_applicant_gurantor1`
    FOREIGN KEY (`loan_applicant_gurantor_id`)
    REFERENCES `temco_db`.`loan_applicant_gurantor` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`temporary_data_for_reconsilation`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`temporary_data_for_reconsilation` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `document_data_verification_id` INT NOT NULL,
  `field_value` TEXT NULL DEFAULT NULL,
  `user_document_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_universal_user_documents_verification_manager_document_d_idx` (`document_data_verification_id` ASC) VISIBLE,
  INDEX `fk_universal_user_documents_data_verification_manager_user__idx` (`user_document_id` ASC) VISIBLE,
  CONSTRAINT `fk_universal_user_documents_data_verification_manager_user_do1`
    FOREIGN KEY (`user_document_id`)
    REFERENCES `temco_db`.`universal_user_document` (`id`),
  CONSTRAINT `fk_universal_user_documents_verification_manager_document_dat1`
    FOREIGN KEY (`document_data_verification_id`)
    REFERENCES `temco_db`.`document_data_verification` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`reconsilation_history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`reconsilation_history` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `data` DATETIME NULL DEFAULT NULL,
  `temporary_data_for_reconsilation_id` INT NOT NULL,
  `approval_status_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_reconsilation_history_temporary_data_for_reconsilation1_idx` (`temporary_data_for_reconsilation_id` ASC) VISIBLE,
  INDEX `fk_reconsilation_history_approval_status1_idx` (`approval_status_id` ASC) VISIBLE,
  CONSTRAINT `fk_reconsilation_history_approval_status1`
    FOREIGN KEY (`approval_status_id`)
    REFERENCES `temco_db`.`approval_status` (`id`),
  CONSTRAINT `fk_reconsilation_history_temporary_data_for_reconsilation1`
    FOREIGN KEY (`temporary_data_for_reconsilation_id`)
    REFERENCES `temco_db`.`temporary_data_for_reconsilation` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`scholarship_catergory`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`scholarship_catergory` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `catergory` DOUBLE NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 128
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`scholarship_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`scholarship_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `loan_customer_id` INT NOT NULL,
  `scholarship_catergory_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_scholarship_manager_loan_customer1_idx` (`loan_customer_id` ASC) VISIBLE,
  INDEX `fk_scholarship_manager_scholarship_catergory1_idx` (`scholarship_catergory_id` ASC) VISIBLE,
  CONSTRAINT `fk_scholarship_manager_loan_customer1`
    FOREIGN KEY (`loan_customer_id`)
    REFERENCES `temco_db`.`loan_customer` (`id`),
  CONSTRAINT `fk_scholarship_manager_scholarship_catergory1`
    FOREIGN KEY (`scholarship_catergory_id`)
    REFERENCES `temco_db`.`scholarship_catergory` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1599
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`security_activity_logs`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`security_activity_logs` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `date` DATETIME(6) NULL DEFAULT NULL,
  `login_session_id` INT NOT NULL,
  `general_organization_profile_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_security_activity_logs_login_session1_idx` (`login_session_id` ASC) VISIBLE,
  INDEX `fk_security_activity_logs_general_organization_profile1_idx` (`general_organization_profile_id` ASC) VISIBLE,
  CONSTRAINT `fk_security_activity_logs_general_organization_profile1`
    FOREIGN KEY (`general_organization_profile_id`)
    REFERENCES `temco_db`.`general_organization_profile` (`id`),
  CONSTRAINT `fk_security_activity_logs_login_session1`
    FOREIGN KEY (`login_session_id`)
    REFERENCES `temco_db`.`login_session` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`settings_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`settings_type` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`settings`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`settings` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `value` DOUBLE NULL DEFAULT NULL,
  `limit` DOUBLE NULL DEFAULT NULL,
  `settings_type_id` INT NOT NULL,
  `created_date` DATETIME NULL DEFAULT NULL,
  `updated_date` DATETIME NULL DEFAULT NULL,
  `general_user_profile_created_by` INT NULL DEFAULT NULL,
  `general_user_profile_updated_by` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_settings_settings_type1_idx` (`settings_type_id` ASC) VISIBLE,
  INDEX `fk_settings_general_user_profile1_idx` (`general_user_profile_created_by` ASC) VISIBLE,
  INDEX `fk_settings_general_user_profile2_idx` (`general_user_profile_updated_by` ASC) VISIBLE,
  CONSTRAINT `fk_settings_general_user_profile1`
    FOREIGN KEY (`general_user_profile_created_by`)
    REFERENCES `temco_db`.`general_user_profile` (`id`),
  CONSTRAINT `fk_settings_general_user_profile2`
    FOREIGN KEY (`general_user_profile_updated_by`)
    REFERENCES `temco_db`.`general_user_profile` (`id`),
  CONSTRAINT `fk_settings_settings_type1`
    FOREIGN KEY (`settings_type_id`)
    REFERENCES `temco_db`.`settings_type` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`status_comment_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`status_comment_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `loan_status_manager_id` INT NOT NULL,
  `comment_type_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_status_comment_manager_loan_status_manager1_idx` (`loan_status_manager_id` ASC) VISIBLE,
  INDEX `fk_status_comment_manager_comment_type1_idx` (`comment_type_id` ASC) VISIBLE,
  CONSTRAINT `fk_status_comment_manager_comment_type1`
    FOREIGN KEY (`comment_type_id`)
    REFERENCES `temco_db`.`comment_type` (`id`),
  CONSTRAINT `fk_status_comment_manager_loan_status_manager1`
    FOREIGN KEY (`loan_status_manager_id`)
    REFERENCES `temco_db`.`loan_status_manager` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 11
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`student_due`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`student_due` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `loan_customer_id` INT NOT NULL COMMENT 'Link to student/loan customer',
  `due_category_id` INT NOT NULL COMMENT 'Type of due (course, diploma, etc.)',
  `currency_id` INT NOT NULL COMMENT 'Currency for this specific due',
  `due_amount` DECIMAL(15,2) NOT NULL COMMENT 'Amount due in specified currency',
  `due_amount_lkr` DECIMAL(15,2) NULL DEFAULT NULL COMMENT 'Equivalent amount in LKR (calculated)',
  `exchange_rate_used` DECIMAL(15,4) NULL DEFAULT NULL COMMENT 'Exchange rate used for conversion',
  `payment_status` VARCHAR(50) NULL DEFAULT 'PENDING' COMMENT 'PENDING, REQUESTED, APPROVED, DISBURSED, COMPLETED, CANCELLED',
  `academic_year` VARCHAR(20) NULL DEFAULT NULL COMMENT 'Academic year (e.g., 2024/2025)',
  `semester` VARCHAR(20) NULL DEFAULT NULL COMMENT 'Semester/Term (e.g., Semester 1)',
  `due_date` DATE NULL DEFAULT NULL COMMENT 'Payment due date',
  `payee_institution` VARCHAR(255) NULL DEFAULT NULL COMMENT 'Institution/body to receive payment',
  `payee_bank_details` TEXT NULL DEFAULT NULL COMMENT 'Bank details for international payment',
  `loan_manager_id` INT NULL DEFAULT NULL COMMENT 'Link to loan if approved',
  `loan_requested_date` DATETIME NULL DEFAULT NULL COMMENT 'When student requested loan',
  `loan_approved_date` DATETIME NULL DEFAULT NULL COMMENT 'When loan was approved',
  `loan_disbursed_date` DATETIME NULL DEFAULT NULL COMMENT 'When loan was disbursed',
  `scholarship_amount` DECIMAL(15,2) NULL DEFAULT '0.00' COMMENT 'Scholarship discount amount',
  `discount_amount` DECIMAL(15,2) NULL DEFAULT '0.00' COMMENT 'Other discounts',
  `net_payable_amount` DECIMAL(15,2) NULL DEFAULT NULL COMMENT 'Final amount payable after discounts',
  `service_charge_percentage` DECIMAL(5,2) NULL DEFAULT '0.00' COMMENT 'Bank service charge %',
  `service_charge_amount` DECIMAL(15,2) NULL DEFAULT '0.00' COMMENT 'Calculated service charge',
  `remarks` TEXT NULL DEFAULT NULL COMMENT 'Additional notes',
  `supporting_documents` TEXT NULL DEFAULT NULL COMMENT 'Paths/references to uploaded documents',
  `verification_status` VARCHAR(50) NULL DEFAULT 'PENDING' COMMENT 'PENDING, VERIFIED, REJECTED',
  `verification_token` VARCHAR(100) NULL DEFAULT NULL COMMENT 'Token from API/email verification',
  `verified_by` INT NULL DEFAULT NULL COMMENT 'User ID who verified',
  `verified_date` DATETIME NULL DEFAULT NULL COMMENT 'Verification timestamp',
  `created_date` DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
  `modified_date` DATETIME NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `created_by` INT NULL DEFAULT NULL,
  `modified_by` INT NULL DEFAULT NULL,
  `is_deleted` TINYINT(1) NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  INDEX `idx_loan_customer` (`loan_customer_id` ASC) VISIBLE,
  INDEX `idx_due_category` (`due_category_id` ASC) VISIBLE,
  INDEX `idx_currency` (`currency_id` ASC) VISIBLE,
  INDEX `idx_payment_status` (`payment_status` ASC) VISIBLE,
  INDEX `idx_verification_status` (`verification_status` ASC) VISIBLE,
  INDEX `idx_verification_token` (`verification_token` ASC) VISIBLE,
  INDEX `idx_loan_manager` (`loan_manager_id` ASC) VISIBLE,
  INDEX `idx_created_date` (`created_date` ASC) VISIBLE,
  INDEX `idx_due_date` (`due_date` ASC) VISIBLE,
  INDEX `idx_is_deleted` (`is_deleted` ASC) VISIBLE,
  INDEX `idx_academic_year` (`academic_year` ASC) VISIBLE,
  INDEX `idx_customer_category_status` (`loan_customer_id` ASC, `due_category_id` ASC, `payment_status` ASC) VISIBLE,
  CONSTRAINT `student_due_ibfk_1`
    FOREIGN KEY (`loan_customer_id`)
    REFERENCES `temco_db`.`loan_customer` (`id`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `student_due_ibfk_2`
    FOREIGN KEY (`due_category_id`)
    REFERENCES `temco_db`.`due_category` (`id`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `student_due_ibfk_3`
    FOREIGN KEY (`currency_id`)
    REFERENCES `temco_db`.`currency` (`id`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `student_due_ibfk_4`
    FOREIGN KEY (`loan_manager_id`)
    REFERENCES `temco_db`.`loan_manager` (`id`)
    ON DELETE SET NULL
    ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci
COMMENT = 'Association table linking students to their various dues with amounts and currencies';


-- -----------------------------------------------------
-- Table `temco_db`.`submitted_user_document`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`submitted_user_document` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `field_value` VARCHAR(45) NULL DEFAULT NULL,
  `document_creator_id` INT NOT NULL,
  `universal_user_document_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_submitted_user_document_document_creator1_idx` (`document_creator_id` ASC) VISIBLE,
  INDEX `fk_submitted_user_document_universal_user_document1_idx` (`universal_user_document_id` ASC) VISIBLE,
  CONSTRAINT `fk_submitted_user_document_document_creator1`
    FOREIGN KEY (`document_creator_id`)
    REFERENCES `temco_db`.`document_creator` (`id`),
  CONSTRAINT `fk_submitted_user_document_universal_user_document1`
    FOREIGN KEY (`universal_user_document_id`)
    REFERENCES `temco_db`.`universal_user_document` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`supplier`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`supplier` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `general_user_profile_id` INT NOT NULL,
  `general_organization_profile_id` INT NOT NULL,
  `member_id` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_supplier_general_user_profile1_idx` (`general_user_profile_id` ASC) VISIBLE,
  INDEX `fk_supplier_general_organization_profile1_idx` (`general_organization_profile_id` ASC) VISIBLE,
  INDEX `fk_supplier_member1_idx` (`member_id` ASC) VISIBLE,
  CONSTRAINT `fk_supplier_general_organization_profile1`
    FOREIGN KEY (`general_organization_profile_id`)
    REFERENCES `temco_db`.`general_organization_profile` (`id`),
  CONSTRAINT `fk_supplier_general_user_profile1`
    FOREIGN KEY (`general_user_profile_id`)
    REFERENCES `temco_db`.`general_user_profile` (`id`),
  CONSTRAINT `fk_supplier_member1`
    FOREIGN KEY (`member_id`)
    REFERENCES `temco_db`.`member` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 14
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`system_interface`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`system_interface` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `interface_name` VARCHAR(45) NULL DEFAULT NULL,
  `display_name` VARCHAR(45) NULL DEFAULT NULL,
  `url` VARCHAR(45) NULL DEFAULT NULL,
  `status` TINYBLOB NULL DEFAULT NULL,
  `interface_menu_id` INT NOT NULL,
  `interface_sub_menu_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_system_interface_interface_menu1_idx` (`interface_menu_id` ASC) VISIBLE,
  INDEX `fk_system_interface_interface_sub_menu1_idx` (`interface_sub_menu_id` ASC) VISIBLE,
  CONSTRAINT `fk_system_interface_interface_menu1`
    FOREIGN KEY (`interface_menu_id`)
    REFERENCES `temco_db`.`interface_menu` (`id`),
  CONSTRAINT `fk_system_interface_interface_sub_menu1`
    FOREIGN KEY (`interface_sub_menu_id`)
    REFERENCES `temco_db`.`interface_sub_menu` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`table1`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`table1` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `document_creator_id` INT NOT NULL,
  `universal_user_document_id` INT NOT NULL,
  `document_items_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_table1_document_creator1_idx` (`document_creator_id` ASC) VISIBLE,
  INDEX `fk_table1_universal_user_document1_idx` (`universal_user_document_id` ASC) VISIBLE,
  INDEX `fk_table1_document_items1_idx` (`document_items_id` ASC) VISIBLE,
  CONSTRAINT `fk_table1_document_creator1`
    FOREIGN KEY (`document_creator_id`)
    REFERENCES `temco_db`.`document_creator` (`id`),
  CONSTRAINT `fk_table1_document_items1`
    FOREIGN KEY (`document_items_id`)
    REFERENCES `temco_db`.`document_items` (`id`),
  CONSTRAINT `fk_table1_universal_user_document1`
    FOREIGN KEY (`universal_user_document_id`)
    REFERENCES `temco_db`.`universal_user_document` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`universal_org_documents_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`universal_org_documents_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `universal_documents_controller_id` INT NOT NULL,
  `general_organization_profile_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_table1_general_organization_profile1_idx` (`general_organization_profile_id` ASC) VISIBLE,
  CONSTRAINT `fk_table1_general_organization_profile1`
    FOREIGN KEY (`general_organization_profile_id`)
    REFERENCES `temco_db`.`general_organization_profile` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`uploaded_document_file_path`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`uploaded_document_file_path` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `file_path` TEXT NULL DEFAULT NULL,
  `user_document_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_uploaded_document_file_path_user_document1_idx` (`user_document_id` ASC) VISIBLE,
  CONSTRAINT `fk_uploaded_document_file_path_user_document1`
    FOREIGN KEY (`user_document_id`)
    REFERENCES `temco_db`.`universal_user_document` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`use_case`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`use_case` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `case_name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`use_case_has_system_interface`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`use_case_has_system_interface` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `use_case_id` INT NOT NULL,
  `system_interface_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_use_case_has_system_interface_system_interface1_idx` (`system_interface_id` ASC) VISIBLE,
  INDEX `fk_use_case_has_system_interface_use_case1_idx` (`use_case_id` ASC) VISIBLE,
  CONSTRAINT `fk_use_case_has_system_interface_system_interface1`
    FOREIGN KEY (`system_interface_id`)
    REFERENCES `temco_db`.`system_interface` (`id`),
  CONSTRAINT `fk_use_case_has_system_interface_use_case1`
    FOREIGN KEY (`use_case_id`)
    REFERENCES `temco_db`.`use_case` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`use_case_has_user_role`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`use_case_has_user_role` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `use_case_id` INT NOT NULL,
  `user_role_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_use_case_has_user_role_user_role1_idx` (`user_role_id` ASC) VISIBLE,
  INDEX `fk_use_case_has_user_role_use_case1_idx` (`use_case_id` ASC) VISIBLE,
  CONSTRAINT `fk_use_case_has_user_role_use_case1`
    FOREIGN KEY (`use_case_id`)
    REFERENCES `temco_db`.`use_case` (`id`),
  CONSTRAINT `fk_use_case_has_user_role_user_role1`
    FOREIGN KEY (`user_role_id`)
    REFERENCES `temco_db`.`user_role` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`user_login_has_system_interface`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`user_login_has_system_interface` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `user_login_id` INT NOT NULL,
  `system_interface_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_user_login_has_system_interface_system_interface1_idx` (`system_interface_id` ASC) VISIBLE,
  INDEX `fk_user_login_has_system_interface_user_login1_idx` (`user_login_id` ASC) VISIBLE,
  CONSTRAINT `fk_user_login_has_system_interface_system_interface1`
    FOREIGN KEY (`system_interface_id`)
    REFERENCES `temco_db`.`system_interface` (`id`),
  CONSTRAINT `fk_user_login_has_system_interface_user_login1`
    FOREIGN KEY (`user_login_id`)
    REFERENCES `temco_db`.`user_login` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`user_role_has_system_interface`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`user_role_has_system_interface` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `user_role_id` INT NOT NULL,
  `system_interface_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_user_role_has_system_interface_system_interface1_idx` (`system_interface_id` ASC) VISIBLE,
  INDEX `fk_user_role_has_system_interface_user_role1_idx` (`user_role_id` ASC) VISIBLE,
  CONSTRAINT `fk_user_role_has_system_interface_system_interface1`
    FOREIGN KEY (`system_interface_id`)
    REFERENCES `temco_db`.`system_interface` (`id`),
  CONSTRAINT `fk_user_role_has_system_interface_user_role1`
    FOREIGN KEY (`user_role_id`)
    REFERENCES `temco_db`.`user_role` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`user_role_management`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`user_role_management` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `user_role_id` INT NOT NULL,
  `general_user_profile_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_user_role_has_general_user_profile_general_user_profile1_idx` (`general_user_profile_id` ASC) VISIBLE,
  INDEX `fk_user_role_has_general_user_profile_user_role1_idx` (`user_role_id` ASC) VISIBLE,
  CONSTRAINT `fk_user_role_has_general_user_profile_general_user_profile1`
    FOREIGN KEY (`general_user_profile_id`)
    REFERENCES `temco_db`.`general_user_profile` (`id`),
  CONSTRAINT `fk_user_role_has_general_user_profile_user_role1`
    FOREIGN KEY (`user_role_id`)
    REFERENCES `temco_db`.`user_role` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`voucher_approval_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`voucher_approval_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `approved_date` DATETIME(6) NULL DEFAULT NULL,
  `login_session_id` INT NOT NULL,
  `approval_level_id` INT NOT NULL,
  `approval_status_id` INT NOT NULL,
  `voucher_id` INT NOT NULL,
  `comment` TEXT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_approval_level_manager_login_session1_idx` (`login_session_id` ASC) VISIBLE,
  INDEX `fk_approval_level_manager_approval_level1_idx` (`approval_level_id` ASC) VISIBLE,
  INDEX `fk_approval_level_manager_approval_status1_idx` (`approval_status_id` ASC) VISIBLE,
  INDEX `fk_payment_request_approval_manager_payment_request1_idx` (`voucher_id` ASC) VISIBLE,
  INDEX `idx_voucher_approval_status` (`voucher_id` ASC, `approval_status_id` ASC) VISIBLE,
  CONSTRAINT `fk_approval_level_manager_approval_level1`
    FOREIGN KEY (`approval_level_id`)
    REFERENCES `temco_db`.`approval_level` (`id`),
  CONSTRAINT `fk_approval_level_manager_approval_status1`
    FOREIGN KEY (`approval_status_id`)
    REFERENCES `temco_db`.`approval_status` (`id`),
  CONSTRAINT `fk_approval_level_manager_login_session1`
    FOREIGN KEY (`login_session_id`)
    REFERENCES `temco_db`.`login_session` (`id`),
  CONSTRAINT `fk_payment_request_approval_manager_payment_request1`
    FOREIGN KEY (`voucher_id`)
    REFERENCES `temco_db`.`voucher` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 6
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`voucher_attachment`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`voucher_attachment` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `file_name` TEXT NULL DEFAULT NULL,
  `voucher_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_payment_request_attachment_payment_request1_idx` (`voucher_id` ASC) VISIBLE,
  CONSTRAINT `fk_payment_request_attachment_payment_request1`
    FOREIGN KEY (`voucher_id`)
    REFERENCES `temco_db`.`voucher` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 3
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`voucher_item`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`voucher_item` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `amount` DOUBLE NULL DEFAULT NULL,
  `entered_date` DATETIME(6) NULL DEFAULT NULL,
  `is_active` TINYINT NULL DEFAULT NULL,
  `voucher_id` INT NOT NULL,
  `voucher_item_id` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_voucher_item_voucher1_idx` (`voucher_id` ASC) VISIBLE,
  INDEX `fk_voucher_item_voucher_item1_idx` (`voucher_item_id` ASC) VISIBLE,
  CONSTRAINT `fk_voucher_item_voucher1`
    FOREIGN KEY (`voucher_id`)
    REFERENCES `temco_db`.`voucher` (`id`),
  CONSTRAINT `fk_voucher_item_voucher_item1`
    FOREIGN KEY (`voucher_item_id`)
    REFERENCES `temco_db`.`voucher_item` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 3
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`weeks`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`weeks` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 9
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `temco_db`.`weeks_scheduler`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`weeks_scheduler` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `loan_documents_scheduler_id` INT NOT NULL,
  `weeks_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_weeks_scheduler_loan_documents_scheduler1_idx` (`loan_documents_scheduler_id` ASC) VISIBLE,
  INDEX `fk_weeks_scheduler_weeks1_idx` (`weeks_id` ASC) VISIBLE,
  CONSTRAINT `fk_weeks_scheduler_loan_documents_scheduler1`
    FOREIGN KEY (`loan_documents_scheduler_id`)
    REFERENCES `temco_db`.`loan_documents_scheduler` (`id`),
  CONSTRAINT `fk_weeks_scheduler_weeks1`
    FOREIGN KEY (`weeks_id`)
    REFERENCES `temco_db`.`weeks` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 21
DEFAULT CHARACTER SET = utf8mb3;

USE `temco_db` ;

-- -----------------------------------------------------
-- Placeholder table for view `temco_db`.`vw_pending_loan_requests`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`vw_pending_loan_requests` (`student_due_id` INT, `loan_customer_id` INT, `nic` INT, `first_name` INT, `last_name` INT, `email` INT, `mobile_no` INT, `due_type` INT, `due_amount` INT, `currency_code` INT, `due_amount_lkr` INT, `net_payable_amount` INT, `payment_status` INT, `verification_status` INT, `loan_requested_date` INT, `verification_token` INT, `academic_year` INT, `semester` INT, `due_date` INT, `days_until_due` INT);

-- -----------------------------------------------------
-- Placeholder table for view `temco_db`.`vw_student_due_summary`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `temco_db`.`vw_student_due_summary` (`loan_customer_id` INT, `nic` INT, `first_name` INT, `last_name` INT, `email` INT, `total_dues_count` INT, `pending_count` INT, `requested_count` INT, `approved_count` INT, `completed_count` INT, `total_due_lkr` INT, `total_scholarship_lkr` INT, `total_discount_lkr` INT, `total_net_payable_lkr` INT, `total_service_charges_lkr` INT, `international_due_lkr` INT, `local_due_lkr` INT, `earliest_due_date` INT, `latest_due_date` INT, `first_due_created` INT, `last_due_created` INT);

-- -----------------------------------------------------
-- function fn_calculate_net_payable
-- -----------------------------------------------------

DELIMITER $$
USE `temco_db`$$
CREATE DEFINER=`root`@`localhost` FUNCTION `fn_calculate_net_payable`(
    p_student_due_id INT
) RETURNS decimal(15,2)
    READS SQL DATA
    DETERMINISTIC
BEGIN
    DECLARE v_net_payable DECIMAL(15,2);
    
    SELECT 
        (due_amount_lkr - scholarship_amount - discount_amount + service_charge_amount)
    INTO v_net_payable
    FROM student_due
    WHERE id = p_student_due_id;
    
    RETURN IFNULL(v_net_payable, 0.00);
END$$

DELIMITER ;

-- -----------------------------------------------------
-- function fn_convert_to_lkr
-- -----------------------------------------------------

DELIMITER $$
USE `temco_db`$$
CREATE DEFINER=`root`@`localhost` FUNCTION `fn_convert_to_lkr`(
    p_amount DECIMAL(15,2),
    p_currency_id INT
) RETURNS decimal(15,2)
    READS SQL DATA
    DETERMINISTIC
BEGIN
    DECLARE v_exchange_rate DECIMAL(15,4);
    DECLARE v_amount_lkr DECIMAL(15,2);
    
    -- Get exchange rate
    SELECT exchange_rate_to_lkr INTO v_exchange_rate
    FROM currency
    WHERE id = p_currency_id;
    
    -- Calculate LKR amount
    SET v_amount_lkr = p_amount * IFNULL(v_exchange_rate, 1.0);
    
    RETURN v_amount_lkr;
END$$

DELIMITER ;

-- -----------------------------------------------------
-- function fn_get_currency_id
-- -----------------------------------------------------

DELIMITER $$
USE `temco_db`$$
CREATE DEFINER=`root`@`localhost` FUNCTION `fn_get_currency_id`(p_currency_code VARCHAR(10)) RETURNS int
    READS SQL DATA
    DETERMINISTIC
BEGIN
    DECLARE v_currency_id INT;
    
    SELECT id INTO v_currency_id
    FROM currency
    WHERE currency_code = p_currency_code AND is_active = 1
    LIMIT 1;
    
    RETURN v_currency_id;
END$$

DELIMITER ;

-- -----------------------------------------------------
-- function fn_get_due_category_id
-- -----------------------------------------------------

DELIMITER $$
USE `temco_db`$$
CREATE DEFINER=`root`@`localhost` FUNCTION `fn_get_due_category_id`(p_category_code VARCHAR(50)) RETURNS int
    READS SQL DATA
    DETERMINISTIC
BEGIN
    DECLARE v_category_id INT;
    
    SELECT id INTO v_category_id
    FROM due_category
    WHERE category_code = p_category_code AND is_active = 1
    LIMIT 1;
    
    RETURN v_category_id;
END$$

DELIMITER ;

-- -----------------------------------------------------
-- View `temco_db`.`vw_pending_loan_requests`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `temco_db`.`vw_pending_loan_requests`;
USE `temco_db`;
CREATE  OR REPLACE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `temco_db`.`vw_pending_loan_requests` AS select `sd`.`id` AS `student_due_id`,`sd`.`loan_customer_id` AS `loan_customer_id`,`lc`.`nic` AS `nic`,`lc`.`first_name` AS `first_name`,`lc`.`last_name` AS `last_name`,`lc`.`email` AS `email`,`gup`.`mobile_no` AS `mobile_no`,`dc`.`category_name` AS `due_type`,`sd`.`due_amount` AS `due_amount`,`cur`.`currency_code` AS `currency_code`,`sd`.`due_amount_lkr` AS `due_amount_lkr`,`sd`.`net_payable_amount` AS `net_payable_amount`,`sd`.`payment_status` AS `payment_status`,`sd`.`verification_status` AS `verification_status`,`sd`.`loan_requested_date` AS `loan_requested_date`,`sd`.`verification_token` AS `verification_token`,`sd`.`academic_year` AS `academic_year`,`sd`.`semester` AS `semester`,`sd`.`due_date` AS `due_date`,(to_days(`sd`.`due_date`) - to_days(curdate())) AS `days_until_due` from ((((`temco_db`.`student_due` `sd` join `temco_db`.`loan_customer` `lc` on((`sd`.`loan_customer_id` = `lc`.`id`))) left join `temco_db`.`general_user_profile` `gup` on((`lc`.`gup_id` = `gup`.`id`))) join `temco_db`.`due_category` `dc` on((`sd`.`due_category_id` = `dc`.`id`))) join `temco_db`.`currency` `cur` on((`sd`.`currency_id` = `cur`.`id`))) where ((`sd`.`is_deleted` = 0) and (`sd`.`payment_status` in ('PENDING','REQUESTED')) and (`sd`.`verification_status` = 'VERIFIED')) order by `sd`.`due_date`,`sd`.`loan_requested_date`;

-- -----------------------------------------------------
-- View `temco_db`.`vw_student_due_summary`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `temco_db`.`vw_student_due_summary`;
USE `temco_db`;
CREATE  OR REPLACE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `temco_db`.`vw_student_due_summary` AS select `sd`.`loan_customer_id` AS `loan_customer_id`,`lc`.`nic` AS `nic`,`lc`.`first_name` AS `first_name`,`lc`.`last_name` AS `last_name`,`lc`.`email` AS `email`,count(0) AS `total_dues_count`,sum((case when (`sd`.`payment_status` = 'PENDING') then 1 else 0 end)) AS `pending_count`,sum((case when (`sd`.`payment_status` = 'REQUESTED') then 1 else 0 end)) AS `requested_count`,sum((case when (`sd`.`payment_status` = 'APPROVED') then 1 else 0 end)) AS `approved_count`,sum((case when (`sd`.`payment_status` = 'COMPLETED') then 1 else 0 end)) AS `completed_count`,sum(`sd`.`due_amount_lkr`) AS `total_due_lkr`,sum(`sd`.`scholarship_amount`) AS `total_scholarship_lkr`,sum(`sd`.`discount_amount`) AS `total_discount_lkr`,sum(`sd`.`net_payable_amount`) AS `total_net_payable_lkr`,sum(`sd`.`service_charge_amount`) AS `total_service_charges_lkr`,sum((case when (`dc`.`is_international` = 1) then `sd`.`due_amount_lkr` else 0 end)) AS `international_due_lkr`,sum((case when (`dc`.`is_international` = 0) then `sd`.`due_amount_lkr` else 0 end)) AS `local_due_lkr`,min(`sd`.`due_date`) AS `earliest_due_date`,max(`sd`.`due_date`) AS `latest_due_date`,min(`sd`.`created_date`) AS `first_due_created`,max(`sd`.`created_date`) AS `last_due_created` from ((`temco_db`.`student_due` `sd` join `temco_db`.`loan_customer` `lc` on((`sd`.`loan_customer_id` = `lc`.`id`))) join `temco_db`.`due_category` `dc` on((`sd`.`due_category_id` = `dc`.`id`))) where (`sd`.`is_deleted` = 0) group by `sd`.`loan_customer_id`,`lc`.`nic`,`lc`.`first_name`,`lc`.`last_name`,`lc`.`email`;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
